var VORLON;!function(e){!function(e){e[e.NgRepeat=0]="NgRepeat",e[e.RootScope=1]="RootScope",e[e.Controller=2]="Controller",e[e.Directive=3]="Directive"}(e.ScopeType||(e.ScopeType={}));e.ScopeType;!function(e){e[e.Array=0]="Array",e[e.Object=1]="Object",e[e.Number=2]="Number",e[e.String=3]="String",e[e.Boolean=4]="Boolean",e[e.Null=5]="Null"}(e.PropertyType||(e.PropertyType={}));e.PropertyType;!function(e){e[e.ReloadWithDebugInfo=0]="ReloadWithDebugInfo"}(e.MessageType||(e.MessageType={}));e.MessageType}(VORLON||(VORLON={}));
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VORLON;!function(e){var t=function(t){function n(){t.call(this,"ngInspector"),this._rootScopes=[],this._currentShownScopeId=null,this._scopePropertiesNamesToExclude=["$$applyAsyncQueue","$$asyncQueue","$$childHead","$$ChildScope","$$childTail","$$destroyed","$$isolateBindings","$$listenerCount","$$listeners","$$nextSibling","$$phase","$$postDigest","$$postDigestQueue","$$prevSibling","$$transcluded","$$watchers","$$watchersCount","$apply","$applyAsync","$broadcast","$childTail","$destroy","$digest","$emit","$eval","$evalAsync","$even","$first","$index","$last","$middle","$new","$odd","$on","$parent","$root","$watch","$watchCollection","$watchGroup"],this._ready=!1}return __extends(n,t),n.prototype.getID=function(){return"NGINSPECTOR"},n.prototype.refresh=function(){this._packageAndSendScopes()},n.prototype.startClientSide=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){e._ready=!0,e.refresh()})},n.prototype.onRealtimeMessageReceivedFromDashboardSide=function(t){"undefined"!=typeof angular&&t.type===e.MessageType.ReloadWithDebugInfo&&angular.reloadWithDebugInfo()},n.prototype._markForRefresh=function(){var e=this;this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){e.refresh()},2e3)},n.prototype._packageAndSendScopes=function(){this._rootScopes=[],this._findRootScopes(document.body),this.sendToDashboard({scopes:this._rootScopes})},n.prototype._findRootScopes=function(t){if("undefined"!=typeof angular){var n=angular.element(t).scope();if(n){var o=this._cleanScope(n);o.$type=e.ScopeType.RootScope,o.$name="$rootScope",this._rootScopes.push(o),this._findChildrenScopes(t,o),this._listenScopeChanges(n)}else for(var r=0;r<t.childNodes.length;r++)this._findRootScopes(t.childNodes[r])}},n.prototype._findChildrenScopes=function(t,n){if("undefined"!=typeof angular)for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes[o],i=angular.element(r).scope();if(i&&i.$id!==n.$id&&-1===n.$children.indexOf(i)){var s=this._cleanScope(i);if(r.attributes&&(r.attributes["ng-repeat"]||r.attributes["data-ng-repeat"]||r.attributes["x-ng-repeat"]||r.attributes.ng_repeat||r.attributes["ng:repeat"]))s.$type=e.ScopeType.NgRepeat,s.$name="ng-repeat";else if(angular.element(r).data("$ngControllerController")){var a=angular.element(r).data("$ngControllerController").constructor,l=a.toString().match(/function (\w+)\(/),c="";if(l&&l.length>1)c=l[1];else{var p=r.attributes["ng-controller"]||r.attributes["data-ng-controller"]||r.attributes["x-ng-controller"]||r.attributes.ng_controller||r.attributes["ng:controller"];p&&(c=p.name)}s.$type=e.ScopeType.Controller,s.$name=c}n.$children.push(s),this._findChildrenScopes(r,s)}else this._findChildrenScopes(r,n)}},n.prototype._listenScopeChanges=function(e){var t=this;e.$watch(function(){t._markForRefresh()})},n.prototype._cleanScope=function(t){for(var n={$id:null,$parentId:null,$children:[],$functions:[],$type:e.ScopeType.Controller,$name:""},o=Object.keys(t),r=0;r<o.length;r++){var i=o[r];-1===this._scopePropertiesNamesToExclude.indexOf(i)&&(n[i]=t[i])}return null!==t.$parent&&(n.$parentId=t.$parent.$id),n},n}(e.ClientPlugin);e.NgInspectorClient=t,e.Core.RegisterClientPlugin(new t)}(VORLON||(VORLON={}));