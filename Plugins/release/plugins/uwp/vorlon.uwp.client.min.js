var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VORLON;!function(e){var t=function(e){function t(){e.call(this,"sample"),this.monitorInterval=null,this._ready=!0}return __extends(t,e),t.prototype.getID=function(){return"UWP"},t.prototype.refresh=function(){},t.prototype.startClientSide=function(){},t.prototype.onRealtimeMessageReceivedFromDashboardSide=function(){},t.prototype.checkMetadata=function(){var e={metadataDate:new Date,winRTAvailable:!1,isRunning:null!=this.monitorInterval},t=window;if(t.Windows){e.winRTAvailable=!0;var n=new t.Windows.ApplicationModel.Resources.Core.ResourceContext;if(e.language=window.navigator.language,e.region=n.qualifierValues.homeRegion,e.deviceType=n.qualifierValues.deviceFamily,e.name=t.Windows.ApplicationModel.Package.current.displayName,e.appversion=t.Windows.ApplicationModel.Package.current.id.version,t.Windows.Security&&t.Windows.Security.ExchangeActiveSyncProvisioning&&t.Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation){var a=new t.Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation;e.systemManufacturer=a.systemManufacturer,e.systemProductName=a.systemProductName}}return this.sendCommandToDashboard("showMetadata",e),e},t.prototype.checkStatus=function(){try{var e={statusDate:new Date,winRTAvailable:!1,isRunning:null!=this.monitorInterval},t=window;return t.Windows&&(e.winRTAvailable=!0,this.getWinRTStatus(e),t.Windows.Phone&&this.getPhoneStatus(e)),this.sendCommandToDashboard("showStatus",e),e}catch(n){console.error(n)}},t.prototype.getPhoneStatus=function(e){var t=window;e.phone={memory:{commitedBytes:t.Windows.Phone.System.Memory.MemoryManager.processCommittedBytes,commitedLimit:t.Windows.Phone.System.Memory.MemoryManager.processCommittedLimit}}},t.prototype.getWinRTStatus=function(e){var t=window,n=t.Windows.System.Diagnostics.ProcessDiagnosticInfo.getForCurrentProcess(),a=n.memoryUsage.getReport();a&&(e.memory={nonPagedPool:a.nonPagedPoolSizeInBytes,pagedPool:a.pagedPoolSizeInBytes,pageFaultCount:a.pageFaultCount,pageFile:a.pageFileSizeInBytes,peakNonPagedPool:a.peakNonPagedPoolSizeInBytes,peakPagedPool:a.peakPagedPoolSizeInBytes,peakPageFile:a.peakPageFileSizeInBytes,peakVirtualMemory:a.peakVirtualMemorySizeInBytes,peakWorkingSet:a.peakWorkingSetSizeInBytes,privatePageCount:a.privatePageCount,virtualMemory:a.virtualMemorySizeInBytes,workingSet:a.workingSetSizeInBytes});var o=n.cpuUsage.getReport();o&&(e.cpu={user:o.userTime,kernel:o.kernelTime});var r=n.diskUsage.getReport();if(r&&(e.disk={bytesRead:r.bytesReadCount,bytesWritten:r.bytesWrittenCount,otherBytes:r.otherBytesCount,otherCount:r.otherOperationCount,readCount:r.readOperationCount,writeCount:r.writeOperationCount}),t.Windows.System.Power){var i=t.Windows.System.Power.PowerManager;i&&(e.power={batteryStatus:i.batteryStatus,energySaverStatus:i.energySaverStatus,powerSupplyStatus:i.powerSupplyStatus,remainingChargePercent:i.remainingChargePercent,remainingDischargeTime:i.remainingDischargeTime});var s=t.Windows.System.Power.ForegroundEnergyManager;s&&(e.energy=e.energy||{},e.energy.foregroundEnergy={excessiveUsageLevel:s.excessiveUsageLevel,lowUsageLevel:s.lowUsageLevel,maxAcceptableUsageLevel:s.maxAcceptableUsageLevel,nearMaxAcceptableUsageLevel:s.nearMaxAcceptableUsageLevel,recentEnergyUsage:s.recentEnergyUsage,recentEnergyUsageLevel:s.recentEnergyUsageLevel});var g=t.Windows.System.Power.BackgroundEnergyManager;g&&(e.energy=e.energy||{},e.energy.backgroundEnergy={excessiveUsageLevel:g.excessiveUsageLevel,lowUsageLevel:g.lowUsageLevel,maxAcceptableUsageLevel:g.maxAcceptableUsageLevel,nearMaxAcceptableUsageLevel:g.nearMaxAcceptableUsageLevel,nearTerminationUsageLevel:g.nearTerminationUsageLevel,recentEnergyUsage:g.recentEnergyUsage,recentEnergyUsageLevel:g.recentEnergyUsageLevel,terminationUsageLevel:g.terminationUsageLevel})}if(t.Windows.Networking&&t.Windows.Networking.Connectivity&&t.Windows.Networking.Connectivity.NetworkInformation){{var c=t.Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();c.networkAdapter}e.network={ianaInterfaceType:c.networkAdapter.ianaInterfaceType.toString(),signal:c.getSignalBars()}}},t.prototype.startMonitor=function(e){var t=this;this.monitorInterval&&clearInterval(this.monitorInterval),this.monitorInterval=setInterval(function(){t.checkStatus()},e.interval),this.checkStatus()},t.prototype.stopMonitor=function(){this.monitorInterval&&(clearInterval(this.monitorInterval),this.monitorInterval=null),this.checkMetadata()},t}(e.ClientPlugin);e.UWPClient=t,t.prototype.ClientCommands={startMonitor:function(e){var t=this;t.startMonitor(e)},stopMonitor:function(){var e=this;e.stopMonitor()},getStatus:function(){var e=this;e.checkStatus()},getMetadata:function(){var e=this;e.checkMetadata()}},e.Core.RegisterClientPlugin(new t)}(VORLON||(VORLON={}));