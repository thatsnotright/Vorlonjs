var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.aXeCheck={id:"accessibility.aXeCheck",title:"aXe accessibility check",description:"We are using aXe helps you catch accessibility issues early.",prepare:function(e,t){t.pendingLoad++,axe.a11yCheck(document,function(i){e.items=[],e.failed=i.violations.length>0,e.skipRootLevel=e.failed;for(var n=0;n<i.violations.length;n++){var r=i.violations[n],o={description:r.description,failed:!0,id:r.id,title:r.help,type:"blockitems",items:[]};e.items.push(o);for(var s=0;s<r.nodes.length;s++){var a=r.nodes[s],c={title:a.html,items:[]};o.items.push(c);for(var l=0;l<a.any.length;l++)c.items.push({title:a.any[l].message})}}t.pendingLoad--})}}}(t=e.Accessibility||(e.Accessibility={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.deviceIcons={id:"mobileweb.deviceIcons",title:"define platform icons",description:"Platform icons helps user pinning your website with an icon that fits well on mobile device home.",nodeTypes:["meta","link"],prepare:function(e){e.items=e.items||[],e.type="blockitems",e.data={hasWindowsIcons:!1,hasWindowsNotification:!1,hasIOSIcons:!1}},check:function(e,t){if("LINK"==e.nodeName){var i=e.getAttribute("rel");i&&"apple-touch-icon-precomposed"==i&&(t.data.hasIOSIcons=!0)}else if("META"==e.nodeName){var n=e.getAttribute("name");n&&("msapplication-notification"==n.toLowerCase()?t.data.hasWindowsNotification=!0:0==n.toLowerCase().indexOf("msapplication-")&&(t.data.hasWindowsIcons=!0))}},endcheck:function(e){e.data.hasIOSIcons||(e.failed=!0,e.items.push({title:'add Apple - iOS icons by adding link tags like <link rel="apple-touch-icon" href="youricon" sizes="57x57"" />'})),e.data.hasWindowsIcons||(e.failed=!0,e.items.push({title:'add Microsoft - Windows tiles by adding meta tags like <link name="msapplication-square150x150logo" content="yourimage" />'}))}}}(t=e.DOM||(e.DOM={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.mobileMediaqueries={id:"mobileweb.usemediaqueries",title:"use responsive approaches",description:"Even if your website target only certain devices, you may have users with unexpected devices or screen ratio.",prepare:function(e){e.items=e.items||[],e.type="blockitems",e.data||(e.data={cssnbqueries:0,domnbqueries:0})},check:function(e,t,i){this.checkNodes(e,i,t)},checkNodes:function(e,t,i){i&&i.forEach(function(e){if("media"===e.type){var i=e.selector;i&&(i=i.toLowerCase(),(i.indexOf("width")>=0||i.indexOf("height")>=0)&&t.data.cssnbqueries++)}})},endcheck:function(){}}}(t=e.CSS||(e.CSS={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.mobileMediaqueries={id:"mobileweb.usemediaqueries",title:"use responsive approaches",description:"Even if your website target only certain devices, you may have users with unexpected devices or screen ratio.",nodeTypes:["link"],prepare:function(e){e.items=e.items||[],e.data||(e.data={cssnbqueries:0,domnbqueries:0})},check:function(e,t){if(e.getAttribute){var i=e.getAttribute("rel");if(i&&"stylesheet"==i.toLocaleLowerCase()){var n=e.getAttribute("media");n&&(n=n.toLowerCase(),(n.indexOf("width")>=0||n.indexOf("height")>=0)&&t.data.domnbqueries++)}}},endcheck:function(e){0==e.data.cssnbqueries&&0==e.data.domnbqueries&&(0==e.data.cssnbqueries&&(e.failed=!0,e.items.push({title:"your css (either files or inline) does not use any media queries"})),0==e.data.domnbqueries&&(e.failed=!0,e.items.push({title:"your link tags does not use any media queries"})))}}}(t=e.DOM||(e.DOM={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.useViewport={id:"mobileweb.use-viewport",title:"use meta viewport",description:'Use meta viewport tag to choose how your website will get scaled on smaller devices like phones. Define at least <meta name="viewport" content="width=device-width, initial-scale=1">',nodeTypes:["meta"],prepare:function(e){e.failed=!0},check:function(e,t){var i=e.getAttribute("name");i&&"viewport"==i.toLowerCase()&&(t.failed=!1)}}}(t=e.DOM||(e.DOM={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=5,i=5;e.filesBundle={id:"performances.bundles",title:"try bundling your files",description:"Multiple http requests makes your site slower, especially on mobile devices",check:function(e,n){e.items=e.items||[],e.type="blockitems";var r=0;for(var o in n.files.stylesheets){var s=o.toLowerCase().indexOf("vorlon/plugins")>=0;s||r++}r>t&&(e.failed=!0,e.items.push({title:"You have more than "+t+" stylesheets in your page, consider bundling your stylesheets."}));var a=0;for(var o in n.files.scripts){var s=o.toLowerCase().indexOf("vorlon/plugins")>=0;s||a++}a>i&&(e.failed=!0,e.items.push({title:"You have more than "+i+" scripts files in your page, consider bundling your scripts."}))}}}(t=e.Files||(e.Files={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.contentEncoding={id:"performances.contentencoding",title:"encode static content",description:"content encoding like gzip or deflate helps reducing the network bandwith required to display your website, it is especially important for mobile devices. Use content encoding for static files like CSS and JavaScript files.",check:function(e,t){e.items=e.items||[],e.type="blockitems";for(var i in t.files.stylesheets){var n=i.toLowerCase().indexOf("vorlon/plugins")>=0;!n&&t.files.stylesheets[i].encoding&&"none"==t.files.stylesheets[i].encoding&&(e.failed=!0,e.items.push({title:"use content encoding for "+i}))}for(var i in t.files.scripts){var n=i.toLowerCase().indexOf("vorlon/plugins")>=0;!n&&t.files.scripts[i].encoding&&"none"==t.files.scripts[i].encoding&&(e.failed=!0,e.items.push({title:"use content encoding for "+i}))}}}}(t=e.Files||(e.Files={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.filesMinification={id:"performances.minification",title:"minify static files",description:"minification helps reducing the network bandwith required to display your website, it is especially important for mobile devices. Minify static files like CSS and JavaScript files.",check:function(e,t){e.items=e.items||[],e.type="blockitems";for(var i in t.files.stylesheets){var n=i.toLowerCase().indexOf("vorlon/plugins")>=0;if(!n){var r=this.getAverageCharacterPerLine(t.files.stylesheets[i].content);50>r&&(e.failed=!0,e.items.push({title:"minify "+i}))}}for(var i in t.files.scripts){var n=i.toLowerCase().indexOf("vorlon/plugins")>=0;if(!n){var r=this.getAverageCharacterPerLine(t.files.scripts[i].content);50>r&&(e.failed=!0,e.items.push({title:"minify "+i}))}}},getAverageCharacterPerLine:function(e){if(!e)return 1e3;var t=e.split("\n");if(0==t.length)return 1e3;var i=0;return t.forEach(function(e){i+=e.length}),i/t.length}}}(t=e.Files||(e.Files={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.dontUsePlugins={id:"webstandards.dont-use-plugins",title:"object and embed",description:"With HTML5 embed or object tags can often be replaced with HTML5 features.",nodeTypes:["EMBED","OBJECT"],prepare:function(e){e.items=e.items||[],e.type="blockitems"},check:function(t,i){var n=null,r=null,o=null,n=t.getAttribute("src");n=n?n.toLowerCase():"";var r=t.getAttribute("data");r=r?r.toLowerCase():"";var o=t.getAttribute("type");o=o?o.toLowerCase():"",n.indexOf(".swf")>0||r.indexOf("swf")>0?(i.failed=!0,i.items.push({message:"consider using HTML5 instead of Flash",content:e.Tools.htmlToString(t.outerHTML)})):o.indexOf("silverlight")>0?(i.failed=!0,i.items.push({message:"consider using HTML5 instead of Silverlight",content:e.Tools.htmlToString(t.outerHTML)})):n.indexOf(".svg")>0||r.indexOf("svg")>0?(i.failed=!0,i.items.push({message:"dont't use SVG with "+t.nodeType,content:e.Tools.htmlToString(t.outerHTML)})):(i.failed=!0,i.items.push({message:"use HTML5 instead of embed or object elements",content:e.Tools.htmlToString(t.outerHTML)}))}}}(i=t.DOM||(t.DOM={}))}(i=t.Rules||(t.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.browserdetection={id:"webstandards.avoid-browser-detection",exceptions:["ajax.googleapis.com","ajax.aspnetcdn.com","ajax.microsoft.com","jquery","mootools","prototype","protoaculous","google-analytics.com","partner.googleadservices.com","vorlon"],title:"avoid browser detection",description:"Nowadays, browser have very similar user agent, and browser feature moves very fast. Browser detection leads to britle code. Consider using feature detection instead.",nodeTypes:["#comment"],violations:[],prepare:function(e){e.items=e.items||[],e.type="blockitems"},init:function(){document.parentNode;try{this.hook("navigator","userAgent"),this.hook("navigator","appVersion"),this.hook("navigator","appName"),this.hook("navigator","product"),this.hook("navigator","vendor")}catch(e){console.warn("Vorlon.js Web Standards Plugin : Browser detection rule not available due to browser limitations");var t={title:"Vorlon.js Web Standards Plugin no available.",content:"Browser detection rule not available due to browser limitations"};this.violations.push(t)}},hook:function(t,i){var n=this;e.Tools.HookProperty(t,i,function(e){if(!e.file||!n.isException(e.file)){var t={title:"Access to window.navigator."+e.property,content:"From "+e.file+" at "+e.line};n.violations.push(t)}})},check:function(){},isException:function(e){return e?this.exceptions.some(function(t){return e.indexOf(t)>=0}):!1},endcheck:function(e){if(this.violations.length>0){e.failed=!0;for(var t=0;t<this.violations.length;t++)e.items.push(this.violations[t])}}}}(i=t.DOM||(t.DOM={}))}(i=t.Rules||(t.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.browserinterop={id:"webstandards.avoid-browser-specific-content",title:"avoid browser specific content",description:"Avoid serving content based on user-agent. Browsers evolve fast and user-agent based content may frustrate your users by not getting the best content for their preferred browser.",nodeTypes:["#comment"],userAgents:{"Microsoft Edge":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240","Microsoft IE11":"Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; Touch; rv:11.0) like Gecko","Google Chrome":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36",Firefox:"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:41.0) Gecko/20100101 Firefox/41.0"},prepare:function(t,i){t.items=t.items||[],t.type="blockitems",i.files.browserInterop={};var n=e.Core._messenger._serverUrl;if(!n)return console.warn("no Vorlon server url for browser interop",e.Core._messenger),void 0;"/"!==n[n.length-1]&&(n+="/");for(var r in this.userAgents)this.fetchHTMLDocument(n,r,this.userAgents[r],i)},check:function(){},endcheck:function(e,t){var i=t.files.browserInterop,n={};for(var r in i)for(var o in i)o==r||n[r+o]||(n[o+r]=!0,i[o].loaded&&i[r].loaded&&i[o].content!=i[r].content&&(e.failed=!0,e.items.push({title:r+" and "+o+" received different content"})))},fetchHTMLDocument:function(e,t,i,n){var r=null,o=null,s=!1,a=e+"httpproxy/fetch?fetchurl="+encodeURIComponent(n.location)+"&fetchuseragent="+encodeURIComponent(i);try{r=new XMLHttpRequest,r.onreadystatechange=function(){4==r.readyState&&(s=!0,clearTimeout(o),n.pendingLoad--,n.files.browserInterop[t]=200==r.status?{loaded:!0,url:n.location.href,userAgent:i,status:r.status,content:r.responseText}:{loaded:!1,url:n.location.href,userAgent:i,status:r.status,content:null,error:r.statusText})},r.open("GET",a,!0),n.pendingLoad++,r.send(null),o=setTimeout(function(){s||(s=!0,n.pendingLoad--,console.warn("fetch timeout for "+t),r.abort(),n.files.browserInterop[t]={loaded:!1,url:n.location.href,userAgent:i,status:r.status,content:null,error:"timeout"})},2e4)}catch(c){n.pendingLoad--,console.error(c),console.warn("received error for "+t+"("+r.status+") "+n.pendingLoad),n.files.browserInterop[t]={loaded:!1,url:n.location.href,status:0,content:null,error:c.message}}}}}(i=t.DOM||(t.DOM={}))}(i=t.Rules||(t.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.dontUseBrowserConditionalComment={id:"webstandards.avoid-browser-specific-css",title:"avoid conditional comments",description:"Conditional comments are not the best way to adapt your website to target browser, and support is dropped for IE > 9.",nodeTypes:["#comment"],prepare:function(e){e.items=e.items||[],e.type="blockitems"},check:function(t,i){var n=t.nodeValue.toLowerCase(),r=n.indexOf("[if ie ")>=0||n.indexOf("[if !ie]")>=0||n.indexOf("[if gt ie ")>=0||n.indexOf("[if gte ie ")>=0||n.indexOf("[if lt ie ")>=0||n.indexOf("[if lte ie ")>=0;r&&(i.failed=!0,i.items.push({title:e.Tools.htmlToString(t.nodeValue)}))}}}(i=t.DOM||(t.DOM={}))}(i=t.Rules||(t.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.cssfallback={id:"webstandards.cssfallback",title:"incorrect use of css fallback",description:"Ensure css fallback.",prepare:function(){this.fallBackErrorList=[]},check:function(e,t){for(var i=t,n=0;n<i.length;n++){var r=(i[n].selector,i[n].rules),o=this.checkPrefix(r);o.length>0&&this.fallBackErrorList.push(o)}},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},checkPrefix:function(e){var t=[];if(e&&e.length)for(var i=0;i<e.length;i++)if(0===e[i].directive.indexOf("-webkit")){var n=this.unprefixedPropertyName(e[i].directive),r=this.checkIfNoPrefix(e,n);if(!r){var o=document.createElement("div");o.style["webkit"+this.capitalizeFirstLetter(n)]=e[i].value,void 0!==o.style["webkit"+this.capitalizeFirstLetter(n)]&&(r=!0)}r||t.push(e[i].directive)}return t},checkIfNoPrefix:function(e,t){var i=!1;if(e&&e.length)for(var n=0;n<e.length;n++)if(0===e[n].directive.indexOf(t)){i=!0;break}return i||(i=this.checkIfMsPrefix(e,t)),i},checkIfMsPrefix:function(e,t){var i=!1;if(e&&e.length)for(var n=0;n<e.length;n++)if(0===e[n].directive.indexOf("-ms-"+t)){i=!0;break}return i},unprefixedPropertyName:function(e){return e.replace("-webkit-","").replace("-moz-","").replace("-o-","").replace("-ms-","")},endcheck:function(e){e.items=[];var t=!1;if(this.fallBackErrorList)for(var i=0;i<this.fallBackErrorList.length;i++)for(var n in this.fallBackErrorList[i]){t=!0;var r=this.fallBackErrorList[i][n],o={title:n,type:"itemslist",items:[]};for(var s in r){var a={failed:!0,id:"."+r[s][c],items:[],title:s};o.items.push(a);for(var c=0;c<r[s].length;c++)a.items.push({failed:!0,id:"."+r[s][c],items:[],title:"from "+r[s][c]+" to "+r[s][c].replace("-webkit-","").replace("-moz-","").replace("-o-","").replace("-ms-",""),type:"error"});o.items.length&&e.items.push(o)}}else{e.title="(disabled !) incorrect use of css fallback",t=!0;var l={title:"the check of css Fallback is disabled",type:"blockitems",failed:!0,items:[]};e.items.push(l)}e.failed=t}}}(t=e.CSS||(e.CSS={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t,i,n={animation:"webkit","animation-delay":"webkit","animation-direction":"webkit","animation-duration":"webkit","animation-fill-mode":"webkit","animation-iteration-count":"webkit","animation-name":"webkit","animation-play-state":"webkit","animation-timing-function":"webkit",appearance:"webkit moz","border-end":"webkit moz","border-end-color":"webkit moz","border-end-style":"webkit moz","border-end-width":"webkit moz","border-image":"webkit o","border-start":"webkit moz","border-start-color":"webkit moz","border-start-style":"webkit moz","border-start-width":"webkit moz","box-sizing":"webkit","column-count":"webkit moz","column-gap":"webkit moz","column-rule":"webkit moz","column-rule-color":"webkit moz","column-rule-style":"webkit moz","column-rule-width":"webkit moz","column-width":"webkit moz",hyphens:"webkit moz ms","margin-end":"webkit moz","margin-start":"webkit moz","padding-end":"webkit moz","padding-start":"webkit moz","tab-size":"webkit moz o","text-size-adjust":"webkit moz ms",transform:"webkit ms","transform-origin":"webkit ms",transition:"webkit moz o","transition-delay":"webkit moz o","transition-duration":"webkit","transition-property":"webkit","transition-timing-function":"webkit","user-select":"webkit moz ms"},r=(Array.prototype.push,new Array);for(var o in n)if(n.hasOwnProperty(o)){t=[],i=n[o].split(" ");for(var s=0,a=i.length;a>s;s++)t.push("-"+i[s]+"-"+o);n[o]=t,t.forEach(function(e,t){r[e]=t})}e.cssprefixes={id:"webstandards.prefixes",title:"incorrect use of prefixes",description:"Ensure you use all vendor prefixes and unprefixed version for HTML5 CSS properties.",check:function(e,t,i){var r=[],o={title:e,type:"itemslist",items:[]};i.items=i.items||[],this.checkNodes(e,n,o,t,r),o.items.length&&(i.items.push(o),i.failed=!0)},unprefixedPropertyName:function(e){return e.replace("-webkit-","").replace("-moz-","").replace("-o-","").replace("-ms-","")},getMissingPrefixes:function(e,t,i){var n=e[i],r=[];return n.forEach(function(e){var i=t.rules.some(function(t){return t.directive==e});i||r.push(e)}),r},checkNodes:function(e,t,i,n,r){var o=this;n&&n.forEach(function(n){var s=null;if(n.rules&&n.rules.length>0)for(var a={},c=0,l=n.rules.length;l>c;c++){var d=n.rules[c].directive,u=o.unprefixedPropertyName(d);if(!a[u]&&t.hasOwnProperty(u)){-1==t[u].indexOf(u)&&t[u].push(u);var m=o.getMissingPrefixes(t,n,u);m.length&&(s||(i.failed=!0,i.items=i.items||[],s={title:n.selector,items:[]},i.items.push(s)),s.items.push({title:"<strong>"+u+"</strong> : missing "+m}))}a[u]=!0}"media"===n.type&&o.checkNodes(e,t,i,n.subStyles,r)})}}}(t=e.CSS||(e.CSS={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modernDocType={id:"webstandards.documentmode",title:"use modern doctype",description:"Modern doctype like <!DOCTYPE html> are better for browser compatibility and enable using HTML5 features.",nodeTypes:["META"],prepare:function(e){e.items=e.items||[],e.type="blockitems"},check:function(e,t){var i=e.getAttribute("http-equiv");if(i&&"x-ua-compatible"==i.toLowerCase()){var n=e.getAttribute("content");n.toLowerCase().indexOf("edge")>=0||(t.failed=!0,t.items.push({title:"your website use IE's document mode compatibility for an older version of IE ",content:e.outerHTML}))}},endcheck:function(e,t){var i=t.doctype||{},n={title:"used doctype is "+i.html};(i.publicId||i.systemId)&&(e.failed=!0,e.items.push(n))}}}(t=e.DOM||(e.DOM={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var VORLON;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=[{name:"Prototype",minVersions:[{major:"1.7.",minor:"2"}],check:function(e,t){var i=t.match(/Prototype JavaScript framework, version (\d+\.\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"Dojo",minVersions:[{major:"1.5.",minor:"3"},{major:"1.6.",minor:"2"},{major:"1.7.",minor:"5"},{major:"1.8.",minor:"5"},{major:"1.9.",minor:"2"},{major:"1.10.",minor:"0"}],check:function(e,t){if(-1===t.indexOf("dojo"))return!1;var i=t.match(/\.version\s*=\s*\{\s*major:\s*(\d+)\D+(\d+)\D+(\d+)/m);return i?e(this,i[1]+"."+i[2]+"."+i[3]):(i=t.match(/\s*major:\s*(\d+),\s*minor:\s*(\d+),\s*patch:\s*(\d+),/im),i&&e(this,i[1]+"."+i[2]+"."+i[3]))}},{name:"Mootools",minVersions:[{major:"1.2.",minor:"6"},{major:"1.4.",minor:"5"},{major:"1.5.",minor:""}],check:function(e,t){var i=t.match(/this.MooTools\s*=\s*\{version:\s*'(\d+\.\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"SWFObject",minVersions:[{major:"2.",minor:"2"}],check:function(e,t){var i=t.match(/\*\s+SWFObject v(\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"jQuery Form Plugin",minVersions:[{major:"3.",minor:"22"}],check:function(e,t){var i=t.match(/Form Plugin\s+\*\s+version: (\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"Modernizr",minVersions:[{major:"2.5.",minor:"2"},{major:"2.6.",minor:"2"},{major:"2.7.",minor:"1"},{major:"2.8.",minor:"3"}],check:function(e,t){var i=t.match(/\*\s*Modernizr\s+(\d+\.\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"jQuery cookie",minVersions:[{major:"1.3.",minor:"1"},{major:"1.4.",minor:"1"}],patchOptional:!1,check:function(e,t){var i=t.match(/\*\s*jQuery Cookie Plugin v(\d+\.\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"hoverIntent",minVersions:[{major:"1.8.",minor:"1"}],patchOptional:!1,check:function(e,t){var i=t.match(/\*\s*hoverIntent v(\d+\.\d+\.\d+)/m);return i&&e(this,i[1])}},{name:"jQuery Easing",minVersions:[{major:"1.3.",minor:"0"}],patchOptional:!0,check:function(e,t){var i=t.match(/\*\s*jQuery Easing v(\d+\.\d+)\s*/m);return i&&e(this,i[1])}},{name:"underscore",minVersions:[{major:"1.8.",minor:"3"},{major:"1.7.",minor:"0"},{major:"1.6.",minor:"0"},{major:"1.5.",minor:"2"}],patchOptional:!1,check:function(e,t){var i=t.match(/exports._(?:.*)?.VERSION="(\d+.\d+.\d+)"/m);return i&&e(this,i[1])}},{name:"hammer js",minVersions:[{major:"2.0.",minor:"4"}],patchOptional:!1,check:function(e,t){if(-1!==t.indexOf("hammer.input")){var i=t.match(/.VERSION\s*=\s*['|"](\d+.\d+.\d+)['|"]/m);return i&&e(this,i[1])}return!1}},{name:"jQuery Superfish",minVersions:[{major:"1.7.",minor:"4"}],patchOptional:!1,check:function(e,t){var i=t.match(/jQuery Superfish Menu Plugin - v(\d+.\d+.\d+)"/m);return i&&e(this,i[1])}},{name:"jQuery mousewheel",minVersions:[{major:"3.1.",minor:"12"}],patchOptional:!0,check:function(e,t){var i=t.match(/.mousewheel={version:"(\d+.\d+.\d+)/);return i&&e(this,i[1])}},{name:"jQuery mobile",minVersions:[{major:"1.4.",minor:"5"},{major:"1.3.",minor:"2"}],patchOptional:!0,check:function(e,t){var i=t.match(/.mobile,{version:"(\d+.\d+.\d+)/);return i&&e(this,i[1])}},{name:"jQuery UI",minVersions:[{major:"1.8.",minor:"24"},{major:"1.9.",minor:"2"},{major:"1.10.",minor:"4"},{major:"1.11.",minor:"4"}],check:function(e,t){var i=t.match(/\.ui,[\s\r\n]*\{[\s\r\n]*version:\s*"(\d+.\d+.\d+)/m);return i&&e(this,i[1])}},{name:"jQuery",minVersions:[{major:"1.6.",minor:"4"},{major:"1.7.",minor:"2"},{major:"1.8.",minor:"2"},{major:"1.9.",minor:"1"},{major:"1.10.",minor:"2"},{major:"1.11.",minor:"3"},{major:"2.0.",minor:"3"},{major:"2.1.",minor:"4"}],patchOptional:!0,check:function(e,t){var i=/(?:jQuery\s*v)(\d+.\d+.\d+)\s/g,n=i.exec(t);if(n){var r=new RegExp("(?::\\s*)"+n[0],"g");if(!r.exec(t))return e(this,n[1])}var o=t.match(/jquery:\s*"([^"]+)/);if(o)return e(this,o[1]);var i=/(?:jquery[,\)].{0,200}=")(\d+\.\d+)(\..*?)"/gi,s=i.exec(t),a=s?s[1]+(s[2]||""):null;return a&&e(this,a)}}];e.librariesVersions={id:"webstandards.javascript-libraries-versions",title:"update javascript libraries",description:"Try being up to date with your JavaScript libraries like jQuery. Latest versions usually improves performances and browsers compatibility.",prepare:function(e){e.items=e.items||[],e.type="blockitems"},check:function(e,i,n){n.items=n.items||[];var r=null;if(i&&"inline"!=e)for(var o=0;o<t.length;o++){var s,a=t[o];if(s=a.check.call(a,this.checkVersion,i),s&&s.needsUpdate){r||(r={title:e,items:[]},n.items.push(r)),r.items.push({title:"detected "+s.name+" version "+s.version}),n.failed=!0;break}}},checkVersion:function(e,t){var i={name:e.name,needsUpdate:!0,minVersion:e.minVersions[0].major+e.minVersions[0].minor,version:t,bannedVersion:null};if(e.patchOptional){var n=t.match(/^(\d+\.\d+)(.*)$/);n&&!/^\.\d+/.test(n[2])&&(t=n[1]+".0"+n[2])}for(var r=0;r<e.minVersions.length;r++){var o=e.minVersions[r];if(0===t.indexOf(o.major)){i.minVersion=o.major+o.minor,i.needsUpdate=+t.slice(o.major.length)<+o.minor;break}}return e.bannedVersions&&e.bannedVersions.indexOf(t)>=0&&(i.bannedVersion=t,i.needsUpdate=!0),i}}}(t=e.JavaScript||(e.JavaScript={}))}(t=e.Rules||(e.Rules={}))}(t=e.WebStandards||(e.WebStandards={}))}(VORLON||(VORLON={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},VORLON;!function(e){var t=function(t){function i(){t.call(this,"webstandards"),this._currentAnalyze={},this._id="WEBSTANDARDS"}return __extends(i,t),i.prototype.refresh=function(){},i.prototype.startClientSide=function(){var t=this;this._loadNewScriptAsync("css.js",function(){t._loadNewScriptAsync("axe.min.js",function(){t._ready=!0;for(var i in e.WebStandards.Rules)for(var n in e.WebStandards.Rules[i]){var r=e.WebStandards.Rules[i][n];r.init&&r.init()}},!0)},!0)},i.prototype.startNewAnalyze=function(e){var t=this;this.trace("start webstandards analyzis "+e.id),this._currentAnalyze={id:e.id,results:{},processing:!0,canceled:!1,location:window.location.href,html:document.documentElement.outerHTML,doctype:{html:null,name:null,publicId:null,systemId:null},files:{scripts:{},stylesheets:{}},pendingLoad:0,lastActivity:new Date},this.prepareAnalyze(this._currentAnalyze);var i=document.doctype;if(i){var n="<!DOCTYPE "+i.name+(i.publicId?' PUBLIC "'+i.publicId+'"':"")+(!i.publicId&&i.systemId?" SYSTEM":"")+(i.systemId?' "'+i.systemId+'"':"")+">";this._currentAnalyze.doctype={html:n,name:i.name,publicId:i.publicId,systemId:i.systemId}}for(var r=document.querySelectorAll("link[rel=stylesheet]"),o=(r.length,0);o<r.length;o++){var s=r[o],a=s.attributes.getNamedItem("href");if(a){var c={url:a.value,loaded:!1,content:null};this._currentAnalyze.files.stylesheets[a.value]=c,this.getDocumentContent({analyzeid:e.id,url:a.value},c,function(e,i){t.analyzeCssDocument(e,i.content,t._currentAnalyze)})}}for(var l=document.querySelectorAll("script"),o=(l.length,0);o<l.length;o++){var s=l[o],d=s.attributes.getNamedItem("src");if(d&&d.value){var u=d.value.indexOf("vorlon.js")>0||d.value.indexOf("vorlon.min.js")>0||d.value.indexOf("vorlon.max.js")>0;if(!u){var c={url:d.value,loaded:!1,content:null};this._currentAnalyze.files.scripts[d.value]=c,this.getDocumentContent({analyzeid:e.id,url:d.value},c,function(e,i){t.analyzeJsDocument(e,i.content,t._currentAnalyze)})}}}this.analyzeDOM(document,this._currentAnalyze.html,this._currentAnalyze),this._refreshLoop=setInterval(function(){t.checkLoadingState()},1e3)},i.prototype.checkLoadingState=function(){this._currentAnalyze&&this._currentAnalyze.pendingLoad<=0&&(this.trace("resource load completed"),this._currentAnalyze.processing=!1),!this._currentAnalyze||this._currentAnalyze.ended||this._currentAnalyze.canceled||this._currentAnalyze.processing||(this._currentAnalyze.ended=!0,this.endAnalyze(this._currentAnalyze))},i.prototype.initialiseRuleSummary=function(e,t){var i=e.id.split("."),n=t.results,r="";return n.rules=n.rules||{},i.forEach(function(e){r=r.length>0?"."+e:e,n.rules||(n.rules={}),n.rules[e]||(n.rules[e]={id:r}),n=n.rules[e]}),void 0===n.failed&&(n.failed=!1,n.title=e.title,n.description=e.description),n},i.prototype.prepareAnalyze=function(t){for(var i in e.WebStandards.Rules.CSS){var n=e.WebStandards.Rules.CSS[i];if(n){var r=this.initialiseRuleSummary(n,t);n.prepare&&n.prepare(r,t)}}for(var i in e.WebStandards.Rules.JavaScript){var o=e.WebStandards.Rules.JavaScript[i];if(o){var r=this.initialiseRuleSummary(o,t);o.prepare&&o.prepare(r,t)}}for(var i in e.WebStandards.Rules.Accessibility){var s=e.WebStandards.Rules.Accessibility[i];if(s){var r=this.initialiseRuleSummary(s,t);s.prepare&&s.prepare(r,t)}}},i.prototype.endAnalyze=function(t){clearInterval(this._refreshLoop);for(var i in e.WebStandards.Rules.DOM){var n=e.WebStandards.Rules.DOM[i];if(n&&!n.generalRule&&n.endcheck){var r=this.initialiseRuleSummary(n,t);n.endcheck(r,t)}}for(var i in e.WebStandards.Rules.CSS){var o=e.WebStandards.Rules.CSS[i];if(o){var r=this.initialiseRuleSummary(o,t);o.endcheck&&o.endcheck(r,t)}}for(var i in e.WebStandards.Rules.JavaScript){var s=e.WebStandards.Rules.JavaScript[i];if(s){var r=this.initialiseRuleSummary(s,t);s.endcheck&&s.endcheck(r,t)}}this.analyzeFiles(this._currentAnalyze),this.trace("sending result to dashboard"),this.sendCommandToDashboard("analyseResult",{result:this._currentAnalyze})},i.prototype.cancelAnalyse=function(e){clearInterval(this._refreshLoop),this.trace("canceling analyze "+e),this._currentAnalyze&&this._currentAnalyze.id==e&&(this.trace("analyze "+e+" canceled"),this._currentAnalyze.canceled=!0,this._currentAnalyze.processing=!1,this.sendCommandToDashboard("analyseCanceled",{id:this._currentAnalyze.id}))},i.prototype.analyzeDOM=function(t,i,n){var r=this,o=[],s=[],a={domRulesIndex:{},domRulesForAllNodes:[]};for(var c in e.WebStandards.Rules.DOM){var l=e.WebStandards.Rules.DOM[c];if(l){var d=this.initialiseRuleSummary(l,n);l.prepare&&l.prepare(d,n),l.generalRule?o.push(l):(s.push(l),l.nodeTypes.length?l.nodeTypes.forEach(function(e){e=e.toUpperCase(),a.domRulesIndex[e]||(a.domRulesIndex[e]=[]),a.domRulesIndex[e].push(l)}):a.domRulesForAllNodes.push(l))}}this.analyzeDOMNode(t,a,n,i),o.forEach(function(e){r.applyDOMNodeRule(t,e,n,i)})},i.prototype.analyzeDOMNode=function(e,t,i,n){var r=this;if("STYLE"===e.nodeName&&this.analyzeCssDocument("inline",e.innerHTML,i),"SCRIPT"===e.nodeName){var o=e,s=o.getAttribute("type"),a=o.innerHTML.trim().length>0;(!s||"text/javascript"==s&&a)&&this.analyzeJsDocument("inline",o.innerHTML,i)}var c=t.domRulesIndex[e.nodeName.toUpperCase()];c&&c.length&&c.forEach(function(t){r.applyDOMNodeRule(e,t,i,n)}),t.domRulesForAllNodes&&t.domRulesForAllNodes.length&&t.domRulesForAllNodes.forEach(function(t){r.applyDOMNodeRule(e,t,i,n)});for(var l=0,d=e.childNodes.length;d>l;l++)this.analyzeDOMNode(e.childNodes[l],t,i,n)},i.prototype.applyDOMNodeRule=function(e,t,i,n){var r=this.initialiseRuleSummary(t,i);t.check(e,r,i,n)},i.prototype.analyzeCssDocument=function(t,i,n){var r=new cssjs,o=r.parseCSS(i);this.trace("processing css "+t);for(var s in e.WebStandards.Rules.CSS){var a=e.WebStandards.Rules.CSS[s];if(a){var c=this.initialiseRuleSummary(a,n);a.check(t,o,c,n)}}},i.prototype.analyzeFiles=function(t){for(var i in e.WebStandards.Rules.Files){var n=e.WebStandards.Rules.Files[i];if(n){var r=this.initialiseRuleSummary(n,t);n.check(r,t)}}},i.prototype.analyzeJsDocument=function(t,i,n){this.trace("processing script "+t);for(var r in e.WebStandards.Rules.JavaScript){var o=e.WebStandards.Rules.JavaScript[r];if(o){var s=this.initialiseRuleSummary(o,n);o.check(t,i,s,n)}}},i.prototype.getDocumentContent=function(e,t,i){var n=this;this._currentAnalyze.pendingLoad++,this.trace("request file "+e.url+" "+this._currentAnalyze.pendingLoad),this.xhrDocumentContent(e,function(r,o,s,a,c,l){t.content=o,t.loaded=null==l||void 0==l,t.encoding=c,t.contentLength=a,t.error=l,t.status=s,n._currentAnalyze.lastActivity=new Date,n._currentAnalyze.pendingLoad--,n.checkLoadingState(),t.loaded&&!n._currentAnalyze.canceled&&i(e.url,t)})},i.prototype.xhrDocumentContent=function(e,t){var i=this,n=null,r=!1,o=null;if(!e||!e.url)return this.trace("invalid fetch request"),void 0;var s=e.url;0===s.indexOf("//")&&(s=window.location.protocol+s),s=this.getAbsolutePath(s),this.trace("fetching "+s);
try{n=new XMLHttpRequest,n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){r=!0,clearTimeout(o);var s=n.getResponseHeader("X-VorlonProxyEncoding")||n.getResponseHeader("content-encoding"),a=n.getResponseHeader("content-length");i.trace("encoding for "+e.url+" is "+s),t(e.url,n.responseText,n.status,a,s,null)}else r=!0,clearTimeout(o),t(e.url,null,n.status,null,null,n.responseText)},n.open("GET",s,!0),n.send(null),o=setTimeout(function(){r||(r=!0,i.trace("fetch timeout for "+e.url),n.abort(),t(e.url,null,null,null,null,"timeout"))},2e4)}catch(a){console.error(a),r=!0,clearTimeout(o),t(e.url,null,null,null,null,a.message)}},i.prototype.getAbsolutePath=function(e){var t=document.createElement("a");return t.href=e,t.href},i}(e.ClientPlugin);e.WebStandardsClient=t,t.prototype.ClientCommands={startNewAnalyze:function(e){var t=this;t.startNewAnalyze(e)},cancelAnalyze:function(e){var t=this;t.cancelAnalyse(e.id)}},e.Core.RegisterClientPlugin(new t)}(VORLON||(VORLON={}));