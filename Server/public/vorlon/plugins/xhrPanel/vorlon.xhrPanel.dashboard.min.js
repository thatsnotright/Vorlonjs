var __extends=this&&this.__extends||function(t,e){function s(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},VORLON;!function(t){var e=function(t){function e(){t.call(this,"xhrPanel","control.html","control.css"),this.hooked=!1,this.cache=[],this._id="XHRPANEL",this._ready=!1}return __extends(e,t),e.prototype._mapAction=function(t,e){var s=this._dashboardDiv.querySelector(t);return s.addEventListener("click",function(){return e(s)}),s},e.prototype.startDashboardSide=function(t){var e=this;void 0===t&&(t=null),this._dashboardDiv=t,this._dashboardItems={},this._insertHtmlContentAsync(t,function(t){e._itemsContainer=t.querySelector(".network-items"),e._clearButton=t.querySelector('x-action[event="clear"]'),e._startStopButton=t.querySelector('x-action[event="toggleState"]'),e._startStopButtonState=t.querySelector('x-action[event="toggleState"]>i'),e._clearButton.addEventListener("click",function(){e.sendCommandToClient("clear"),e._itemsContainer.innerHTML="",e._dashboardItems={}}),e._startStopButton.addEventListener("click",function(){e._startStopButtonState.classList.contains("fa-spin")||(e._startStopButtonState.classList.remove("fa-play"),e._startStopButtonState.classList.remove("fa-stop"),e._startStopButtonState.classList.remove("no-anim"),e._startStopButtonState.classList.add("fa-spin"),e._startStopButtonState.classList.add("fa-spinner"),e.hooked?e.sendCommandToClient("stop"):e.sendCommandToClient("start"))}),e._ready=!0})},e.prototype.onRealtimeMessageReceivedFromClientSide=function(){},e.prototype.processNetworkItem=function(t){var e=this._dashboardItems[t.id];e||(e=new s(this._itemsContainer,t),this._dashboardItems[t.id]=e),e.update(t)},e}(t.DashboardPlugin);t.XHRPanelDashboard=e,e.prototype.DashboardCommands={state:function(t){var e=this;e.hooked=t.hooked,e._startStopButtonState.classList.remove("fa-spin"),e._startStopButtonState.classList.remove("fa-spinner"),e.hooked?(e._startStopButtonState.classList.remove("fa-play"),e._startStopButtonState.classList.add("fa-stop"),e._startStopButtonState.classList.add("no-anim")):(e._startStopButtonState.classList.remove("fa-stop"),e._startStopButtonState.classList.add("fa-play"),e._startStopButtonState.classList.add("no-anim"))},xhr:function(t){var e=this;e.processNetworkItem(t)}};var s=function(){function e(e,s){var n=this;this.item=s,this.element=new t.FluentDOM("DIV","network-item").append("DIV","description",function(t){t.append("DIV","status item smallitem",function(t){n.statusElt=t.element,t.html('<i class="fa fa-spin fa-spinner"></i>')}).append("DIV","method item smallitem",function(t){t.text(s.method.toUpperCase())}).append("DIV","url item",function(t){t.text(s.url)})}).append("DIV","details",function(t){t.append("DIV","responsetype",function(t){n.responseTypeElt=t.element,t.html("&nbsp;")})}).element,e.appendChild(this.element)}return e.prototype.update=function(t){this.item=t,4===t.readyState&&(200!==t.status&&this.element.classList.add("error"),this.statusElt.innerText=t.status.toString(),this.responseTypeElt.innerText="response type : "+(t.responseType||"text"))},e}();t.Core.RegisterDashboardPlugin(new e)}(VORLON||(VORLON={}));