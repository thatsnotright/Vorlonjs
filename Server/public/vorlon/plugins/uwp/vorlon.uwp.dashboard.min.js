var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VORLON;!function(e){function t(e){var t=e;return 1024>t?t+" bytes":(t/=1024,1024>t?(t<<0)+" ko":(t/=1024,1024>t?(t<<0)+" Mo":(t/=1024,(t<<0)+" Go")))}var n=function(e){function t(){e.call(this,"uwp","control.html","control.css"),this._ready=!0}return __extends(t,e),t.prototype.getID=function(){return"UWP"},t.prototype.startDashboardSide=function(e){var t=this;void 0===e&&(e=null),this._insertHtmlContentAsync(e,function(e){t._startStopButton=e.querySelector('x-action[event="toggleState"]'),t._startStopButtonState=e.querySelector('x-action[event="toggleState"]>i'),t._refreshButton=e.querySelector('x-action[event="btnrefresh"]'),t._nowinrtpanel=e.querySelector("#nowinrt"),t._metadatapanel=e.querySelector("#metadata"),t._networkpanel=e.querySelector("#network"),t._memorypanel=e.querySelector("#memory"),t._cpupanel=e.querySelector("#cpu"),t._diskpanel=e.querySelector("#disk"),t._powerpanel=e.querySelector("#power"),t._energypanel=e.querySelector("#energy"),t._refreshButton.onclick=function(){t.sendCommandToClient("getMetadata"),t.sendCommandToClient("getStatus")},t.sendCommandToClient("getMetadata"),t._startStopButton.addEventListener("click",function(){t._startStopButtonState.classList.contains("fa-spin")||(t._startStopButtonState.classList.remove("fa-play"),t._startStopButtonState.classList.remove("fa-stop"),t._startStopButtonState.classList.remove("no-anim"),t._startStopButtonState.classList.add("fa-spin"),t._startStopButtonState.classList.add("fa-spinner"),t.running?t.sendCommandToClient("stopMonitor"):t.sendCommandToClient("startMonitor",{interval:o}))})})},t.prototype.onRealtimeMessageReceivedFromClientSide=function(){},t.prototype.showNoWinRT=function(){this._nowinrtpanel&&(this._nowinrtpanel.style.display="")},t.prototype.hideNoWinRT=function(){this._nowinrtpanel&&(this._nowinrtpanel.style.display="none")},t.prototype.checkBtnState=function(e){this.running=e,e?(this._startStopButtonState.classList.remove("fa-play"),this._startStopButtonState.classList.remove("fa-spin"),this._startStopButtonState.classList.remove("fa-spinner"),this._startStopButtonState.classList.add("fa-stop"),this._startStopButtonState.classList.add("no-anim")):(this._startStopButtonState.classList.remove("fa-stop"),this._startStopButtonState.classList.remove("fa-spin"),this._startStopButtonState.classList.remove("fa-spinner"),this._startStopButtonState.classList.add("fa-play"),this._startStopButtonState.classList.add("no-anim"))},t.prototype.renderMetadata=function(e){return e.winRTAvailable?(this.hideNoWinRT(),this.checkBtnState(e.isRunning),this._metadataDisplay||(this._metadataDisplay=new i(this._metadatapanel)),this._metadataDisplay.setData(e),void 0):(this.showNoWinRT(),void 0)},t.prototype.initControls=function(){this._memoryMonitor||(this._memoryMonitor=new h(this._memorypanel)),this._cpuMonitor||(this._cpuMonitor=new c(this._cpupanel)),this._diskMonitor||(this._diskMonitor=new d(this._diskpanel)),this._networkMonitor||(this._networkMonitor=new u(this._networkpanel)),this._powerMonitor||(this._powerMonitor=new p(this._powerpanel)),this._energyMonitor||(this._energyMonitor=new m(this._energypanel))},t.prototype.renderStatus=function(e){if(!e.winRTAvailable)return this.showNoWinRT(),void 0;this.hideNoWinRT();var t=new Date(e.statusDate);this.checkBtnState(e.isRunning),this.initControls(),this._memoryMonitor.setData(t,e.memory,e.phone?e.phone.memory:null),this._cpuMonitor.setData(t,e.cpu),this._diskMonitor.setData(t,e.disk),this._networkMonitor.setData(t,e.network),this._powerMonitor.setData(t,e.power),this._energyMonitor.setData(t,e.energy)},t}(e.DashboardPlugin);e.UWPDashboard=n,n.prototype.DashboardCommands={showStatus:function(e){var t=this;t.renderStatus(e)},showMetadata:function(e){var t=this;t.renderMetadata(e)}},e.Core.RegisterDashboardPlugin(new n);var i=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML="<h1>Client device</h1>\n                "+e("app. name","name")+"\n                "+e("app. version","appversion")+"\n                "+e("language","language")+"\n                "+e("region","region")+"\n                "+e("device family","deviceType")+"\n                "+e("manufacturer","systemManufacturer")+"\n                "+e("product name","systemProductName")+"\n                ",this.name=this.element.querySelector(".name"),this.language=this.element.querySelector(".language"),this.region=this.element.querySelector(".region"),this.deviceType=this.element.querySelector(".deviceType"),this.appversion=this.element.querySelector(".appversion"),this.systemManufacturer=this.element.querySelector(".systemManufacturer"),this.systemProductName=this.element.querySelector(".systemProductName")},e.prototype.setData=function(e){return e?(this.element.style.display="",this.name&&(this.name.textContent=e.name,this.language.textContent=e.language,this.region.textContent=e.region,this.deviceType.textContent=e.deviceType,this.appversion.textContent=e.appversion.major+"."+e.appversion.minor+"."+e.appversion.build+"."+e.appversion.revision,this.systemManufacturer.textContent=e.systemManufacturer,this.systemProductName.textContent=e.systemProductName),void 0):(this.element.style.display="none",void 0)},e}();e.MetadataDisplayControl=i;var s=200,a="#00a5b3",r=2,o=5e3,l=1.1,h=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML="<h1>Memory</h1>\n                "+e("working set","workingSet")+'                \n                <canvas id="memoryrealtime" width="360" height="100"></canvas>',this.workingSet=this.element.querySelector(".workingSet"),this.canvas=this.element.querySelector("#memoryrealtime"),this.smoothie=new SmoothieChart({millisPerPixel:s,maxValueScale:l}),this.smoothie.streamTo(this.canvas,o),this.lineWorkset=new TimeSeries,this.smoothie.addTimeSeries(this.lineWorkset,{lineWidth:r,strokeStyle:a})},e.prototype.setData=function(e,n){if(!n)return this.element.style.display="none",void 0;this.element.style.display="";var i=n.workingSet/1048576<<0;this.workingSet.textContent=t(n.workingSet),this.lineWorkset.append(e,i)},e}();e.MemoryMonitorControl=h;var c=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML="<h1>CPU</h1>\n                "+e("total time","userTime")+"   \n                "+e("percent","percent")+'                \n                <canvas id="userrealtime" width="360" height="100"></canvas>',this.canvas=this.element.querySelector("#userrealtime"),this.smoothie=new SmoothieChart({millisPerPixel:s,maxValueScale:l}),this.smoothie.streamTo(this.canvas,o),this.lineUser=new TimeSeries,this.smoothie.addTimeSeries(this.lineUser,{lineWidth:r,strokeStyle:a}),this.userTime=this.element.querySelector(".userTime"),this.percent=this.element.querySelector(".percent")},e.prototype.setData=function(e,t){if(!t)return this.element.style.display="none",void 0;if(this.element.style.display="",this.userTime.textContent=t.user+" ms",this.lastDate){var n=e-this.lastDate,i=t.user-this.lastUserTime,s=100*i/n;this.percent.textContent=s.toFixed(1)+" %",this.lineUser.append(e,s)}this.lastDate=e,this.lastUserTime=t.user},e}();e.CpuMonitorControl=c;var d=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML="<h1>Disk</h1>\n                "+e("read bytes","bytesRead")+'                                 \n                <canvas id="readrealtime" width="360" height="60"></canvas>\n                '+e("write bytes","bytesWritten")+'    \n                <canvas id="writerealtime" width="360" height="60"></canvas>',this.canvasRead=this.element.querySelector("#readrealtime"),this.smoothieRead=new SmoothieChart({millisPerPixel:s,maxValueScale:l}),this.smoothieRead.streamTo(this.canvasRead,o),this.lineRead=new TimeSeries,this.smoothieRead.addTimeSeries(this.lineRead,{lineWidth:r,strokeStyle:a}),this.canvasWrite=this.element.querySelector("#writerealtime"),this.smoothieWrite=new SmoothieChart({millisPerPixel:s,maxValueScale:l}),this.smoothieWrite.streamTo(this.canvasWrite,o),this.lineWrite=new TimeSeries,this.smoothieWrite.addTimeSeries(this.lineWrite,{lineWidth:r,strokeStyle:a}),this.read=this.element.querySelector(".bytesRead"),this.write=this.element.querySelector(".bytesWritten")},e.prototype.setData=function(e,n){if(!n)return this.element.style.display="none",void 0;if(this.element.style.display="",this.read.textContent=t(n.bytesRead),this.write.textContent=t(n.bytesWritten),this.lastDate){var i=e-this.lastDate,s=n.bytesRead-this.lastRead,a=s/i,r=n.bytesWritten-this.lastWrite,o=r/i;this.lineRead.append(e,a),this.lineWrite.append(e,o)}this.lastDate=e,this.lastRead=n.bytesRead,this.lastWrite=n.bytesWritten},e}();e.DiskMonitorControl=d;var u=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML=e("network type","ianaInterfaceType")+"                          \n                "+e("signal","signal")+"    \n                ",this.ianaInterfaceType=this.element.querySelector(".ianaInterfaceType"),this.signal=this.element.querySelector(".signal")},e.prototype.setData=function(e,t){if(!t)return this.element.style.display="none",void 0;this.element.style.display="";var n="unknown ("+t.ianaInterfaceType+")";243==t.ianaInterfaceType||244==t.ianaInterfaceType?n="3G or 4G":71==t.ianaInterfaceType?n="Wifi":6==t.ianaInterfaceType&&(n="LAN"),this.ianaInterfaceType.textContent=n,this.signal.textContent=(t.signal||"")+""},e}();e.NetworkMonitorControl=u;var p=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML=e("power","power")+"    \n                ",this.power=this.element.querySelector(".power")},e.prototype.setData=function(e,t){return t?(this.element.style.display="",this.power.textContent=t.remainingChargePercent+"%",void 0):(this.element.style.display="none",void 0)},e}();e.PowerMonitorControl=p;var m=function(){function e(e){this.element=e,this.render()}return e.prototype.render=function(){var e=function(e,t){return'<div class="labelval"><div class="label">'+e+'</div><div class="val '+t+'"></div></div>'};this.element.innerHTML="<h1>Energy</h1>\n                "+e("usage","recentEnergyUsage")+'        \n                <canvas id="fgusagerealtime" width="360" height="100"></canvas>',this.canvas=this.element.querySelector("#fgusagerealtime"),this.smoothie=new SmoothieChart({millisPerPixel:s,maxValueScale:l}),this.smoothie.streamTo(this.canvas,o),this.lineFgUsage=new TimeSeries,this.smoothie.addTimeSeries(this.lineFgUsage,{lineWidth:r,strokeStyle:a}),this.recentEnergyUsage=this.element.querySelector(".recentEnergyUsage")},e.prototype.setData=function(e,t){return t&&t.foregroundEnergy?(this.element.style.display="",this.recentEnergyUsage.textContent=t.foregroundEnergy.recentEnergyUsage+" %",this.lineFgUsage.append(e,t.foregroundEnergy.recentEnergyUsage),void 0):(this.element.style.display="none",void 0)},e}();e.EnergyMonitorControl=m}(VORLON||(VORLON={}));