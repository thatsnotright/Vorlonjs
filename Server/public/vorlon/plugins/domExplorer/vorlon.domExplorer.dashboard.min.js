var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VORLON;!function(e){var t=function(t){function o(){t.call(this,"domExplorer","control.html","control.css"),this._lastReceivedObject=null,this.clikedNodeID=null,this._autorefresh=!1,this._editablemode=!1,this._clientHaveMutationObserver=!1,this._id="DOM",this._ready=!1}return __extends(o,t),o.prototype.startDashboardSide=function(t){var n=this;void 0===t&&(t=null),this._dashboardDiv=t,this._insertHtmlContentAsync(this._dashboardDiv,function(t){n._containerDiv=t,n.treeDiv=e.Tools.QuerySelectorById(t,"treeView"),n._innerHTMLView=e.Tools.QuerySelectorById(t,"innerHTMLView"),n._margincontainer=e.Tools.QuerySelectorById(t,"margincontainer"),n._bordercontainer=e.Tools.QuerySelectorById(t,"bordercontainer"),n._paddingcontainer=e.Tools.QuerySelectorById(t,"paddingcontainer"),n._sizecontainer=e.Tools.QuerySelectorById(t,"sizecontainer"),n._computedsection=e.Tools.QuerySelectorById(t,"computedsection"),n._searchinput=e.Tools.QuerySelectorById(t,"searchinput"),n._searchresults=e.Tools.QuerySelectorById(t,"searchresults"),n.styleView=e.Tools.QuerySelectorById(t,"styleView");new i(n);n.searchDOM(),n.refreshButton=n._containerDiv.querySelector('x-action[event="refresh"]'),n.inspectButton=n._containerDiv.querySelector('x-action[event="inspect"]'),n._stylesEditor=new r(n),n._containerDiv.addEventListener("inspectFromClient",function(){n.sendCommandToClient("inspect")}),n._containerDiv.addEventListener("refresh",function(){n.sendCommandToClient("refresh")}),n._containerDiv.addEventListener("gethtml",function(){n.sendCommandToClient("getInnerHTML",{order:n._selectedNode.node.internalId})}),n._containerDiv.addEventListener("savehtml",function(){n.clikedNodeID=n._selectedNode.node.internalId,n.sendCommandToClient("saveinnerHTML",{order:n._selectedNode.node.internalId,innerhtml:n._innerHTMLView.value})}),n.treeDiv.addEventListener("click",function(e){var t=e.target;t.className.match("treeNodeButton")&&(t.hasAttribute("data-collapsed")?t.removeAttribute("data-collapsed"):t.setAttribute("data-collapsed",""))}),n.treeDiv.addEventListener("mouseenter",function(e){var t=e.target,i=t.parentElement,o=t.className.match("treeNodeHeader");if(o||i.className.match("treeNodeClosingText"))if(o){i.setAttribute("data-hovered-tag","");var r=$(t).data("internalid");r&&n.hoverNode(r)}else{i.parentElement.setAttribute("data-hovered-tag","");var r=$(i).data("internalid");r&&n.hoverNode(r)}},!0),n.treeDiv.addEventListener("mouseleave",function(e){var t=e.target;if(t.className.match("treeNodeHeader")||t.parentElement.className.match("treeNodeClosingText")){var i=n.treeDiv.querySelector("[data-hovered-tag]");i&&i.removeAttribute("data-hovered-tag"),n.hoverNode(null,!0)}},!0),$("#accordion h3",n._containerDiv).click(function(e){$(".visible",e.target.parentElement).removeClass("visible"),$("#"+e.target.className,e.target.parentElement).addClass("visible"),e.target.classList.add("visible"),-1!==e.target.className.indexOf("htmlsection")?n.sendCommandToClient("getInnerHTML",{order:n._selectedNode.node.internalId}):-1!==e.target.className.indexOf("layoutsection")?n.sendCommandToClient("getStyle",{order:n._selectedNode.node.internalId}):-1!==e.target.className.indexOf("computedsection")&&n.sendCommandToClient("getComputedStyleById",{order:n._selectedNode.node.internalId})}),n._ready=!0,n.sendCommandToClient("getMutationObeserverAvailability")})},o.prototype.searchDOM=function(){var e=this;this._searchinput.addEventListener("keydown",function(t){(13===t.keyCode||9===t.keyCode)&&(t.preventDefault(),e._searchresults.innerHTML="",e._searchresults.classList.remove("noresults"),e._searchresults.classList.remove("found"),e._selectorSearch=e._searchinput.value,e._selectorSearch===e._searchinput.value?e.sendCommandToClient("searchDOMBySelector",{selector:e._searchinput.value,position:e._positionSearch}):(e._positionSearch=0,e.sendCommandToClient("searchDOMBySelector",{selector:e._searchinput.value})))})},o.prototype.makeEditable=function(t){if("true"!=t.contentEditable){var n=document.createRange(),i=window.getSelection();n.setStart(t,1),n.collapse(!0),i.removeAllRanges(),i.addRange(n),this._editableElement&&this.undoEditable(this._editableElement),t.contentEditable="true",this._editablemode=!0,this._editableElement=t,e.Tools.AddClass(t,"editable"),$(t).focus(),$(t).closest(".treeNodeSelected").addClass("editableselection")}},o.prototype.undoEditable=function(t){this._editablemode=!1,t.contentEditable="false",e.Tools.RemoveClass(t,"editable"),$(t).closest(".treeNodeSelected").addClass("editableselection"),this._editableElement=null},o.prototype.onRealtimeMessageReceivedFromClientSide=function(e){"contentchanged"!==e.type||this._editablemode||this._clientHaveMutationObserver&&0!=this._autorefresh?"contentchanged"===e.type&&null!==e.internalId&&this._clientHaveMutationObserver&&(this._autorefresh?this.sendCommandToClient("refreshNode",{order:e.internalId}):this.dirtyCheck()):this.dirtyCheck()},o.prototype.contentChanged=function(){this.refreshButton.setAttribute("changed","")},o.prototype.setInnerHTMLView=function(e){this._innerHTMLView.value=e.innerHTML},o.prototype.setComputedStyle=function(t){var n=this;t&&t.length&&t.forEach(function(t){var i=new e.FluentDOM("div","styleWrap",n._computedsection);i.append("span","styleLabel",function(e){e.text(t.name)}),i.append("span","styleValue",function(e){e.text(t.value)})})},o.prototype.setLayoutStyle=function(e){this._margincontainer.parentElement.parentElement.classList.remove("hide"),$(".top",this._margincontainer).html(e.margin.top),$(".bottom",this._margincontainer).html(e.margin.bottom),$(".left",this._margincontainer).html(e.margin.left),$(".right",this._margincontainer).html(e.margin.right),$(".top",this._bordercontainer).html(e.border.topWidth),$(".bottom",this._bordercontainer).html(e.border.bottomWidth),$(".left",this._bordercontainer).html(e.border.leftWidth),$(".right",this._bordercontainer).html(e.border.rightWidth),$(".top",this._paddingcontainer).html(e.padding.top),$(".bottom",this._paddingcontainer).html(e.padding.bottom),$(".left",this._paddingcontainer).html(e.padding.left),$(".right",this._paddingcontainer).html(e.padding.right);var t=e.size.width;t&&-1!==t.indexOf(".")&&(t=t.split(".")[0]+"px");var n=e.size.height;n&&-1!==n.indexOf(".")&&(n=n.split(".")[0]+"px"),$(this._sizecontainer).html(t+" x "+n)},o.prototype.searchDOMByResults=function(e){this._lengthSearch=e.length,this._selectorSearch=e.selector,this._positionSearch=e.position,this._selectorSearch?this._lengthSearch?(this._searchresults.classList.remove("noresults"),this._searchresults.classList.add("found"),this._searchresults.setAttribute("content",this._positionSearch+"/"+this._lengthSearch)):(this._searchresults.classList.remove("found"),this._searchresults.classList.add("noresults")):(this._searchresults.classList.remove("noresults"),this._searchresults.classList.remove("noresults"))},o.prototype.mutationObeserverAvailability=function(e){this._clientHaveMutationObserver=e.availability},o.prototype.initDashboard=function(e){for(this.refreshButton.removeAttribute("changed"),this._lastReceivedObject=e;this.treeDiv.hasChildNodes();)this.treeDiv.removeChild(this.treeDiv.lastChild);this._rootNode&&this._rootNode.dispose(),this.treeDiv.parentElement&&this.treeDiv.parentElement.classList.add("active"),this._rootNode=new n(this,null,this.treeDiv,e)},o.prototype.updateDashboard=function(e){this._rootNode&&this._rootNode.update(e)},o.prototype.setAutorefresh=function(e){this._autorefresh=e},o.prototype.getContainerDiv=function(){return this._containerDiv},o.prototype.dirtyCheck=function(){this.refreshButton.setAttribute("changed",""),this._autorefresh&&this.sendCommandToClient("refresh")},o.prototype.hoverNode=function(e,t){var n=this;void 0===t&&(t=!1),this._highlightedNode=e,e?t?setTimeout(function(){n._highlightedNode||n.sendCommandToClient("unhighlight",{order:e})},5):this.sendCommandToClient("highlight",{order:e}):this.sendCommandToClient("unhighlight",{order:null})},o.prototype.select=function(e){$("#accordion .stylessection ").trigger("click"),this._margincontainer.parentElement.parentElement.classList.add("hide"),this._selectedNode?(this._selectedNode.selected(!1),this.sendCommandToClient("unselect",{order:this._selectedNode.node.internalId})):this.sendCommandToClient("unselect",{order:null}),e?(this._selectedNode=e,this._selectedNode.selected(!0),this.sendCommandToClient("select",{order:this._selectedNode.node.internalId}),this._stylesEditor.generateStyles(e.node,e.node.internalId),this._innerHTMLView.value=""):this._selectedNode=null},o.prototype.setNodeStyle=function(e,t){this._selectedNode&&this._selectedNode.node.internalId==e&&this._stylesEditor.generateStyles(this._selectedNode.node,this._selectedNode.node.internalId,t)},o}(e.DashboardPlugin);e.DOMExplorerDashboard=t,t.prototype.DashboardCommands={init:function(e){var t=this;t.initDashboard(e)},contentChanged:function(){},searchDOMByResults:function(e){var t=this;t.searchDOMByResults(e)},mutationObeserverAvailability:function(e){var t=this;t.mutationObeserverAvailability(e)},innerHTML:function(e){var t=this;t.setInnerHTMLView(e)},setLayoutStyle:function(e){var t=this;t.setLayoutStyle(e)},setComputedStyle:function(e){var t=this;t.setComputedStyle(e)},refreshNode:function(e){var t=this;t.updateDashboard(e)},nodeStyle:function(e){console.log("dashboard receive node style",e);var t=this;t.setNodeStyle(e.internalID,e.styles)}};var n=function(){function t(e,t,n,i,o){this.attributes=[],this.childs=[],this.parent=t,this.node=i,this.plugin=e,o?(this.parent=o.parent,this.element=o.element,this.element.innerHTML="",this.render(n,!0)):this.render(n)}return t.prototype.dispose=function(){for(var e=0,t=this.childs.length;t>e;e++)this.childs[e].dispose();this.plugin=null,this.parent=null,this.element=null,this.header=null,this.headerAttributes=null,this.contentContainer=null},t.prototype.update=function(e){this.plugin.refreshButton.removeAttribute("changed");this.insertReceivedObject(e,this.plugin._rootNode);e.highlightElementID&&this.openNode(e.highlightElementID)},t.prototype.insertReceivedObject=function(e,n){if(n&&n.node&&n.node.internalId===this.plugin.clikedNodeID||null===this.plugin.clikedNodeID&&n.node.internalId===e.internalId){this.plugin.clikedNodeID=null;var i;return i=null===n.parent?new t(n.plugin,null,this.plugin.treeDiv,e,n):new t(n.plugin,n.parent,n.parent.element,e,n),n.childs=i.childs,n.node.hasChildNodes=!1,n}if(n&&n.childs&&n.childs.length)for(var o=0;o<n.childs.length;o++){var r=this.insertReceivedObject(e,n.childs[o]);if(r)return n.childs.length[o]=r,n}},t.prototype.openNode=function(e){$("#plusbtn"+e).trigger("click"),$(".treeNodeSelected").removeClass("treeNodeSelected");var t=$("#domNode"+e);if(0!=t.length){t.addClass("treeNodeSelected");var n=$(this.plugin.treeDiv);n.animate({scrollTop:t.offset().top-n.offset().top+n.scrollTop()})}},t.prototype.selected=function(t){t?($(".treeNodeSelected").removeClass("treeNodeSelected"),e.Tools.AddClass(this.element,"treeNodeSelected")):$(".treeNodeSelected").removeClass("treeNodeSelected")},t.prototype.render=function(e,t){void 0===t&&(t=!1),"#comment"===this.node.name?this.renderCommentNode(e,t):"3"==this.node.type?this.renderTextNode(e,t):this.renderDOMNode(e,t)},t.prototype.sendTextToClient=function(){this.plugin.sendCommandToClient("setElementValue",{value:this.element.innerHTML,order:this.parent.node.internalId}),this.plugin.undoEditable(this.element)},t.prototype.renderCommentNode=function(n,i){if(void 0===i&&(i=!1),t._spaceCheck.test(this.node.content))if(i)this.element.innerHTML="";else{var o=new e.FluentDOM("span","nodeTextContent nodeComment",n);this.element=o.element,o.text(this.node.content.trim()).editable(!1)}},t.prototype.renderTextNode=function(n,i){var o=this;if(void 0===i&&(i=!1),t._spaceCheck.test(this.node.content))if(i)this.element.innerHTML="";else{var r=new e.FluentDOM("span","nodeTextContent",n);this.element=r.element,r.text(this.node.content.trim()).editable(!1).blur(function(){return o.sendTextToClient()}).keydown(function(e){(13===e.keyCode||9===e.keyCode)&&o.sendTextToClient()}).click(function(){o.plugin.makeEditable(o.element)})}},t.prototype.renderDOMNode=function(t,n){if(void 0===n&&(n=!1),t.setAttribute("data-has-children",""),n)this.element.innerHTML="";else{var i=new e.FluentDOM("DIV","domNode",t);this.element=i.element}this.element.id="domNode"+this.node.internalId,this.renderDOMNodeContent()},t.prototype.renderDOMNodeContent=function(){var n=this,i=e.FluentDOM.forElement(this.element);i.append("BUTTON","treeNodeButton",function(t){t.attr("aria-label","This is a tree node button that allows you to navigate trought the DOM tree"),t.element.id="plusbtn"+n.node.internalId,!n.node.hasChildNodes||n.node.children&&0!==n.node.children.length?e.Tools.RemoveClass(n.element,"collapsed"):(e.Tools.AddClass(n.element,"collapsed"),t.attr("data-collapsed","")),t.attr("button-block",""),t.click(function(){n.node.hasChildNodes&&!t.element.className.match("loading")&&(e.Tools.AddClass(t.element,"loading"),n.plugin.clikedNodeID=n.node.internalId,n.plugin.sendCommandToClient("refreshNode",{order:n.node.internalId}))})});var r=this,s=function(e){$(".b-m-mpanel").remove();var t={width:180,items:[{text:"Edit content as HTML",icon:"",alias:"1-1",action:function(){r.parent.plugin.select(r),r.parent.plugin.sendCommandToClient("getInnerHTML",{order:r.plugin._selectedNode.node.internalId}),$("#accordion .htmlsection").trigger("click")}},{text:"Add attribute",alias:"1-3",icon:"",action:function(){var e=new o(r,"name","value");r.attributes.push(e)}}]};$(".b-m-mpanel").remove(),$(e).contextmenu(t)};i.append("SPAN","treeNodeHeader",function(e){n.header=e.element,e.click(function(){return n.plugin.select(n)}),e.createChild("SPAN","opentag").text("<");var t=e.createChild("SPAN","nodeName");t.text(n.node.name),e.element.id="treeNodeHeader-"+n.node.internalId,$(n.header).data("internalid",n.node.internalId),n.headerAttributes=e.createChild("SPAN","attributes").element,n.node.attributes.forEach(function(e){n.addAttribute(e[0],e[1])}),e.createChild("SPAN","closetag").text(">"),t.element.addEventListener("contextmenu",function(){s("#treeNodeHeader-"+r.node.internalId)})}),this.node.isEmpty?this.header.classList.add("emptynode"):i.append("DIV","nodeContentContainer",function(e){n.contentContainer=e.element,n.node.hasChildNodes&&(n.contentContainer.id="vorlon-"+n.node.internalId);var i=n.node.children;if(i&&i.length)for(var o=0;o<i.length;o++){var r=i[o];if(3!=r.nodeType){var s=new t(n.plugin,n,n.contentContainer,r);n.childs.push(s)}}}),this.node.name&&("input"!=this.node.name&&"meta"!=this.node.name&&"link"!=this.node.name&&"img"!=this.node.name&&"br"!=this.node.name&&"hr"!=this.node.name?i.append("DIV","treeNodeClosingText",function(e){e.createChild("SPAN","openclosingtag").text("</"),e.createChild("SPAN","nodeName").text(n.node.name),e.createChild("SPAN","closetag").text(">"),e.element.dataset||(e.element.dataset={}),$(e.element).data("internalid",n.node.internalId),e.element.id="treeNodeClosingText"+n.node.internalId,e.element.addEventListener("contextmenu",function(){s("#treeNodeClosingText"+n.node.internalId)})}):(i.element.classList.add("notexpansible"),this.header.querySelector(".closetag").innerHTML="/>")),this.node.id&&i.createChild("span","treeNodeTools fa fa-terminal").click(function(){n.plugin.sendCommandToPluginDashboard("CONSOLE","setorder",{order:n.node.id})})},t.prototype.addAttribute=function(e,t){var n=new o(this,e,t);this.attributes.push(n)},t._spaceCheck=/[^\t\n\r ]/,t}();e.DomExplorerNode=n;var i=function(){function t(e){this._plugin=e,this.setSettings(this._plugin.getContainerDiv())}return t.prototype.setSettings=function(t){var n=this;this._globalload=e.Tools.QuerySelectorById(t,"globalload"),this._autorefresh=e.Tools.QuerySelectorById(t,"autorefresh"),this.loadSettings(),this.refreshClient(),$(this._autorefresh).change(function(){n.saveSettings()}),$(this._globalload).change(function(){n.saveSettings()})},t.prototype.refreshClient=function(){this._plugin.sendCommandToClient("setSettings",{globalload:this._globalload.checked,autoRefresh:this._autorefresh.checked})},t.prototype.loadSettings=function(){var t=e.Tools.getLocalStorageValue("settings"+e.Core._sessionID);if(this._autorefresh&&this._globalload&&t){var n=JSON.parse(t);if(n)return $(this._globalload).switchButton({checked:n.globalload}),$(this._autorefresh).switchButton({checked:n.autorefresh}),n.globalload&&this._plugin.sendCommandToClient("globalload",{value:!0}),this._plugin.setAutorefresh(this._autorefresh.checked),void 0}$(this._globalload).switchButton({checked:!1}),$(this._autorefresh).switchButton({checked:!1}),this._plugin.setAutorefresh(this._autorefresh.checked)},t.prototype.saveSettings=function(){this.refreshClient(),this._plugin.setAutorefresh(this._autorefresh.checked),e.Tools.setLocalStorageValue("settings"+e.Core._sessionID,JSON.stringify({globalload:this._globalload.checked,autorefresh:this._autorefresh.checked}))},t}();e.DomSettings=i;var o=function(){function t(e,t,n){this.parent=e,this.name=t,this.value=n,this.render()}return t.prototype.eventNode=function(e,t,n){var i=this,o=e.innerHTML,r=this,s=function(n,s,a){i.parent.plugin.sendCommandToClient("attribute",{attributeName:n,attributeOldName:o,attributeValue:s,order:i.parent.node.internalId}),n||(e.parentElement.removeChild(e),t.parentElement.removeChild(t)),r.parent.plugin.undoEditable(a)},a=function(){var i={width:180,items:[{text:"Edit attribute name",icon:"",alias:"1-1",action:function(){r.parent.plugin.makeEditable(e)}},{text:"Edit attribute value",alias:"1-2",icon:"",action:function(){r.parent.plugin.makeEditable(t)}},{text:"Edit content as HTML",alias:"1-3",icon:"",action:function(){r.parent.plugin.select(r.parent),r.parent.plugin.sendCommandToClient("getInnerHTML",{order:r.parent.plugin._selectedNode.node.internalId}),$("#accordion .htmlsection").trigger("click")}},{text:"Add attribute",alias:"1-4",icon:"",action:function(){r.parent.addAttribute("name","value")}},{text:"Delete attribute",alias:"1-5",icon:"",action:function(){s.bind(r)("",t.innerHTML,t)}}]};$(".b-m-mpanel").remove(),$("#"+n).contextmenu(i)};t.addEventListener("contextmenu",function(){"true"!=t.contentEditable&&"true"!=e.contentEditable&&a.bind(i)("value")}),t.addEventListener("click",function(e){i.uriCheck("click",t,e)||i.parent.plugin.makeEditable(t)}),e.addEventListener("click",function(){i.parent.plugin.makeEditable(e)}),e.addEventListener("contextmenu",function(){"true"!=t.contentEditable&&"true"!=e.contentEditable&&a.bind(i)("name")}),t.addEventListener("blur",function(){s.bind(i)(e.innerHTML,t.innerHTML,t)}),e.addEventListener("blur",function(){s.bind(i)(e.innerHTML,t.innerHTML,e)}),e.addEventListener("keydown",function(n){(13===n.keyCode||9===n.keyCode)&&(n.preventDefault(),s.bind(i)(e.innerHTML,t.innerHTML,e))}),t.addEventListener("keydown",function(n){(13===n.keyCode||9===n.keyCode)&&(n.preventDefault(),s.bind(i)(e.innerHTML,t.innerHTML,t))}),t.addEventListener("mousemove",function(e){i.uriCheck("mousemove",t,e)}),t.addEventListener("mouseout",function(){$(t).removeClass("link-hovered")})},t.prototype.uriCheck=function(e,t,n){if(null!=n&&n.ctrlKey){var i=/(\w+):\/*([^\/]+)([a-z0-9\-@\^=%&;\/~\+]*)[\?]?([^ \#]*)#?([^ \#]*)/i;if(i.test(t.innerText))switch(e){case"click":open(t.innerText);case"mousemove":$(t).addClass("link-hovered");default:return!0}}else $(t).removeClass("link-hovered");return!1},t.prototype.render=function(){var t=new e.FluentDOM("SPAN","nodeAttribute",this.parent.headerAttributes);this.element=t.element;var n=t.createChild("SPAN","attr-name").html(this.name);t.element.id=e.Tools.CreateGUID(),t.createChild("SPAN").html('="');var i=t.createChild("SPAN","attr-value").html(this.value);t.createChild("SPAN").html('"'),this.eventNode(n.element,i.element,t.element.id)},t}();e.DomExplorerNodeAttribute=o;var r=function(){function e(e){this.styles=[],this.plugin=e}return e.prototype._generateButton=function(e,t,n,i){var o=document.createElement("button");return o.innerHTML=t,o.className=n,i&&o.setAttribute(i.name,i.value),o.setAttribute("button-block",""),e.appendChild(o)},e.prototype.generateStyles=function(e,t,n){var i=this;for(this.node=e,this.internalId=t,this.styles=[];this.plugin.styleView.hasChildNodes();)this.plugin.styleView.removeChild(this.plugin.styleView.lastChild);if(n){for(var o=0;o<n.length;o++){var r=n[o],a=r.split(":");void 0!==a[2]&&a[2].indexOf("//")>-1&&(a[1]+=":"+a[2]),this.styles.push(new s(this,a[0],a[1],this.internalId))}this._generateButton(this.plugin.styleView,"+","styleButton",null).addEventListener("click",function(e){new s(i,"property","value",i.internalId,!0),i.plugin.styleView.appendChild(e.target)})}},e}();e.DomExplorerPropertyEditor=r;var s=function(){function e(e,t,n,i,o,r){void 0===o&&(o=!1),void 0===r&&(r=!0),this.parent=e,this.name=t,this.value=n,r&&this._generateStyle(t,n,i,o)}return e.prototype._generateStyle=function(e,t,n,i){var o=this;void 0===i&&(i=!1),console.debug(e+t);var r=document.createElement("div");r.className="styleWrap";var s=document.createElement("div");s.innerHTML=e,s.className="styleLabel",s.contentEditable="false";var a=this._generateClickableValue(s,t,n);if(r.appendChild(s),-1!=e.indexOf("color")){var l=document.createElement("span");l.className="colored-square",l.style.backgroundColor=t,r.appendChild(l)}r.appendChild(a),this.parent.plugin.styleView.appendChild(r),i&&(s.addEventListener("blur",function(){o.parent.plugin.undoEditable(s)}),s.addEventListener("click",function(){o.parent.plugin.makeEditable(s)}),s.addEventListener("keydown",function(e){(13===e.keyCode||9===e.keyCode)&&(o.parent.plugin.makeEditable(a),e.preventDefault())}))},e.prototype._generateClickableValue=function(t,n,i){var o=this,r=document.createElement("div");return r.contentEditable="false",r.innerHTML=n||"&nbsp;",r.className="styleValue",r.addEventListener("keydown",function(n){if(13===n.keyCode||9===n.keyCode){var s={};s.property=t.innerHTML.trim(),s.newValue=r.innerHTML;for(var a=(o.parent.styles,!1),l=0;l<o.parent.styles.length;l++){var d=o.parent.styles[l];if(d.name===s.property){o.parent.styles[l].value=s.newValue,a=!0;break}}a||o.parent.styles.push(new e(o.parent,s.property,s.newValue,i,!1,!1)),o.parent.node.styles=[];for(var l=0;l<o.parent.styles.length;l++)o.parent.node.styles.push(o.parent.styles[l].name+":"+o.parent.styles[l].value);o.parent.plugin.sendCommandToClient("style",{property:t.innerHTML,newValue:r.innerHTML,order:i}),n.preventDefault(),o.parent.plugin.undoEditable(r)}}),r.addEventListener("blur",function(){o.parent.plugin.undoEditable(r)}),r.addEventListener("click",function(){o.parent.plugin.makeEditable(r)}),r},e}();e.DomExplorerPropertyEditorItem=s,e.Core.RegisterDashboardPlugin(new t)}(VORLON||(VORLON={}));