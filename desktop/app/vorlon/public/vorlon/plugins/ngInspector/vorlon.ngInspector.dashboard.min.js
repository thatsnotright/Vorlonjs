var VORLON;!function(e){!function(e){e[e.NgRepeat=0]="NgRepeat",e[e.RootScope=1]="RootScope",e[e.Controller=2]="Controller",e[e.Directive=3]="Directive"}(e.ScopeType||(e.ScopeType={}));e.ScopeType;!function(e){e[e.Array=0]="Array",e[e.Object=1]="Object",e[e.Number=2]="Number",e[e.String=3]="String",e[e.Boolean=4]="Boolean",e[e.Null=5]="Null"}(e.PropertyType||(e.PropertyType={}));e.PropertyType;!function(e){e[e.ReloadWithDebugInfo=0]="ReloadWithDebugInfo"}(e.MessageType||(e.MessageType={}));e.MessageType}(VORLON||(VORLON={}));
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},VORLON;!function(e){var t=function(t){function r(){t.call(this,"ngInspector","control.html","control.css"),this._rootScopes=[],this._currentShownScopeId=null,this._ngInspectorScopeProperties=["$id","$parentId","$children","$functions","$type","$name"],this._scopeNodeTemplate='<a class="ng-scope SCOPECLASSTOREPLACE" data-scope-id="SCOPEIDTOREPLACE">   SCOPEICONTOREPLACE   <span class="scope-name">SCOPENAMETOREPLACE</span>    <span class="scope-id">(SCOPEIDTOREPLACE)</span></a>SCOPECHILDRENTOREPLACE',this._scopePropertyIconTemplate='<span class="fa-stack fa">   <i class="fa fa-square-o fa-stack-2x"></i>   <i class="fa ICONNAMETOREPLACE fa-stack-1x">TEXTTOREPLACE</i> </span>',this._scopePropertyTemplate='<li>   <a class="ng-property PROPERTYTYPECLASSTOREPLACE">       ICONTOREPLACE       <span class="ng-property-name">           PROPERTYTYPETOREPLACE :        </span>       <span class="ng-property-value">           PROPERTYVALUETOREPLACE       </span>       <span class="ng-sub-properties-length">           (SUBLENGTHOREPLACE)       </span>   </a>SUBPROPERTIESTOREPLACE</li>',this._ready=!1}return __extends(r,t),r.prototype.getID=function(){return"NGINSPECTOR"},r.prototype.startDashboardSide=function(t){var r=this;void 0===t&&(t=null),this._insertHtmlContentAsync(t,function(t){var o=$(t).parent();o.on("vorlon.plugins.active",function(){$(".ng-inspector-container").split({orientation:"vertical",limit:50,position:"35%"})}),document.getElementsByClassName("scopes-tree-wrapper")[0].addEventListener("click",function(e){var t=e.target;if(t.classList.contains("ng-scope")||t.parentElement.classList.contains("ng-scope")){var o=t.attributes["data-scope-id"]||t.parentElement.attributes["data-scope-id"],p=parseInt(o.value);r.showScopeDetail(p)}else t.classList.contains("ng-property")||t.parentElement.classList.contains("ng-property")}),document.getElementById("reloadAppWithDebugInfo").addEventListener("click",function(){r.sendToClient({type:e.MessageType.ReloadWithDebugInfo}),document.getElementsByClassName("no-scope-found")[0].style.display="none"}),r._ready=!0})},r.prototype.onRealtimeMessageReceivedFromClientSide=function(e){"contentchanged"!==e.type&&(this._rootScopes=e.scopes,this._rootScopes&&0!==this._rootScopes.length?(document.getElementsByClassName("scopes-tree-wrapper")[0].innerHTML=this._formatScopesTree(e.scopes),document.getElementsByClassName("no-scope-found")[0].style.display="none",this._currentShownScopeId&&this.showScopeDetail(this._currentShownScopeId)):(document.getElementsByClassName("scopes-tree-wrapper")[0].innerHTML="",document.getElementsByClassName("scope-details-wrapper")[0].innerHTML="",document.getElementsByClassName("no-scope-found")[0].style.display="block"))},r.prototype._formatScopesTree=function(e){for(var t='<ul class="scopes-tree">',r=0;r<e.length;r++)t+="<li>"+this._formatScopeNode(e[r])+"</li>";return t+="</ul>"},r.prototype._formatScopeNode=function(t){var r="",o=t.$id,p=t.$name,n="";switch(t.$type){case e.ScopeType.NgRepeat:r="ng-repeat-scope",n="fa-repeat";break;case e.ScopeType.RootScope:r="root-scope",n="fa-arrows-alt";break;case e.ScopeType.Controller:r="controller-scope",n="fa-crosshairs";break;case e.ScopeType.Directive:r="directive-scope",n="caret-square-o-down"}return this._scopeNodeTemplate.replace("SCOPECLASSTOREPLACE",r).replace(/SCOPEIDTOREPLACE/g,o.toString()).replace("SCOPENAMETOREPLACE",p).replace("SCOPEICONTOREPLACE",this._formatScopePropertyIconTemplate(n)).replace("SCOPECHILDRENTOREPLACE",this._formatScopesTree(t.$children))},r.prototype._formatScopePropertyIconTemplate=function(e,t){return void 0===t&&(t=""),this._scopePropertyIconTemplate.replace("ICONNAMETOREPLACE",e).replace("TEXTTOREPLACE",t)},r.prototype._formatScopePropertyTemplate=function(e,t,r,o,p,n){return void 0===n&&(n=null),this._scopePropertyTemplate.replace("ICONTOREPLACE",e).replace("PROPERTYTYPECLASSTOREPLACE",p).replace("PROPERTYTYPETOREPLACE",t).replace("PROPERTYVALUETOREPLACE",r).replace("SUBPROPERTIESTOREPLACE",o).replace("SUBLENGTHOREPLACE",null===n?"":n.toString())},r.prototype._renderScopeDetail=function(e){for(var t='<div class="scope-details"><ul class="scope-properties">',r=Object.keys(e),o=0;o<r.length;o++){var p=r[o];-1===this._ngInspectorScopeProperties.indexOf(p)&&(t+=this._renderScopeProperty(e[p],p))}return t+="</ul></div>"},r.prototype._renderScopeProperty=function(t,r){var o=this._getPropertyType(t),p="",n=t,s=r,a="",c="",i=null,l="";switch(o){case e.PropertyType.Array:p=this._renderScopeSubLevelDetails(t),i=t.length,n="[...]",c="[ ]",l="ng-property-array";break;case e.PropertyType.Object:p=this._renderScopeSubLevelDetails(t),i=0;for(var y=Object.keys(t),E=0;E<y.length;E++){var r=y[E];-1===this._ngInspectorScopeProperties.indexOf(r)&&i++}n="{...}",c="{ }",l="ng-property-object";break;case e.PropertyType.Null:n="null",a="fa-ban",l="ng-property-null";break;case e.PropertyType.Number:c="#",l="ng-property-number";break;case e.PropertyType.String:a="fa-font",l="ng-property-string";break;case e.PropertyType.Boolean:a="fa-check",l="ng-property-boolean"}return this._formatScopePropertyTemplate(this._formatScopePropertyIconTemplate(a,c),s,n,p,l,i)},r.prototype._renderScopeSubLevelDetails=function(e){var t='<ul class="scope-properties">';if(e instanceof Array)for(var r=0;r<e.length;r++)t+=this._renderScopeProperty(e[r],r.toString());else for(var o=Object.keys(e),r=0;r<o.length;r++){var p=o[r];-1===this._ngInspectorScopeProperties.indexOf(p)&&(t+=this._renderScopeProperty(e[p],p))}return t+="</ul>"},r.prototype._getScopeTreeIcon=function(t){var r="",o="";switch(t.$type){case e.ScopeType.RootScope:r="fa-arrows-alt";break;case e.ScopeType.NgRepeat:r="fa-repeat";break;case e.ScopeType.Directive:r="caret-square-o-down";break;case e.ScopeType.Controller:r="fa-crosshairs"}return this._scopePropertyIconTemplate.replace("ICONNAME",r).replace("TEXTTOREPLACE",o)},r.prototype._findScopeById=function(e,t){for(var r=0;r<e.length;r++){if(e[r].$id===t)return e[r];if(e[r].$children.length>0){var o=this._findScopeById(e[r].$children,t);if(o)return o}}return null},r.prototype._getPropertyType=function(t){var r=typeof t;switch(r){case"object":return null==t?e.PropertyType.Null:t instanceof Array?e.PropertyType.Array:e.PropertyType.Object;case"number":return e.PropertyType.Number;case"string":return e.PropertyType.String;case"boolean":return e.PropertyType.Boolean}},r.prototype.showScopeDetail=function(e){this._currentShownScopeId=e;var t=this._findScopeById(this._rootScopes,e),r=document.getElementsByClassName("scope-details-wrapper")[0];r.innerHTML=t?this._renderScopeDetail(t):""},r}(e.DashboardPlugin);e.NgInspectorDashboard=t,e.Core.RegisterDashboardPlugin(new t)}(VORLON||(VORLON={}));