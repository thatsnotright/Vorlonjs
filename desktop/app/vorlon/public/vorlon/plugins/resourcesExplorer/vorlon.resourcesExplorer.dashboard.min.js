var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},VORLON;!function(e){var t=function(t){function o(){t.call(this,"resourcesExplorer","control.html","control.css","control.js"),this._ready=!1,this._id="RESOURCES"}return __extends(o,t),o.prototype.startDashboardSide=function(t){var o=this;void 0===t&&(t=null),this._insertHtmlContentAsync(t,function(a){o._containerDiv=a,o._containerLocalStorage=e.Tools.QuerySelectorById(t,"localStorageTable"),o._containerSessionStorage=e.Tools.QuerySelectorById(t,"sessionStorageTable"),o._containerCookies=e.Tools.QuerySelectorById(t,"cookiesTable"),o.toogleMenu(),o.searchResource(),o.buttonEvent(),o.addResource(),o.removeResource(),o.updateResource(),o._ready=!0})},o.prototype.searchResource=function(){$("#searchlist").keyup(function(){var e=this.value.toLowerCase();$(".table-resources").find("tr").each(function(t){if(t&&!$(this).hasClass("trHead")){var o=$(this).find("td").eq(1).text().toLowerCase();$(this).toggle(-1!==o.indexOf(e))}})})},o.prototype.addResource=function(){var e=this;$(".new-entry-localstorage input").keypress(function(t){if(13==t.which){var o=$(".new-entry-localstorage").find(".new-key-localstorage"),a=$(".new-entry-localstorage").find(".new-value-localstorage");e.sendCommandToClient("order",{order:"localStorage.setItem('"+o.val()+"', '"+a.val()+"')"}),o.val(""),a.val(""),e.sendCommandToClient("refresh"),$(".new-entry").fadeOut()}}),$(".new-entry-sessionstorage input").keypress(function(t){if(13==t.which){var o=$(".new-entry-sessionstorage").find(".new-key-sessionstorage"),a=$(".new-entry-sessionstorage").find(".new-value-sessionstorage");e.sendCommandToClient("order",{order:"sessionStorage.setItem('"+o.val()+"', '"+a.val()+"')"}),o.val(""),a.val(""),e.sendCommandToClient("refresh"),$(".new-entry").fadeOut()}}),$(".new-entry-cookies input").keypress(function(t){if(13==t.which){var o=$(".new-entry-cookies").find(".new-key-cookies"),a=$(".new-entry-cookies").find(".new-value-cookies");e.sendCommandToClient("order",{order:"document.cookie='"+o.val()+"="+a.val()+"';"}),o.val(""),a.val(""),e.sendCommandToClient("refresh"),$(".new-entry").fadeOut()}})},o.prototype.removeResource=function(){var e=this;$("#localStorageTable").on("click",".actionClass",function(){var t=$(this).next("td").text();e.sendCommandToClient("order",{order:"localStorage.removeItem('"+t+"')"}),$(this).parent().remove()}),$("#sessionStorageTable").on("click",".actionClass",function(){var t=$(this).next("td").text();e.sendCommandToClient("order",{order:"sessionStorage.removeItem('"+t+"')"}),$(this).parent().remove()}),$("#cookiesTable").on("click",".actionClass",function(){var t=$(this).next("td").text();e.sendCommandToClient("order",{order:"document.cookie='"+t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';"}),$(this).parent().remove()})},o.prototype.updateResource=function(){var e=this;$(".table-resources-localStorage").on("change",function(t,o){if($(t.target).hasClass("keyClass")){var a=$(t.target).data("key");e.sendCommandToClient("order",{order:"localStorage.setItem('"+o+"', localStorage.getItem('"+a+"')); localStorage.removeItem('"+a+"');"}),$(t.target).data("key",o)}else{var a=$(t.target).prev("td").text();e.sendCommandToClient("order",{order:"localStorage.setItem('"+a+"', '"+o+"')"})}}),$(".table-resources-sessionStorage").on("change",function(t,o){if($(t.target).hasClass("keyClass")){var a=$(t.target).data("key");e.sendCommandToClient("order",{order:"sessionStorage.setItem('"+o+"', sessionStorage.getItem('"+a+"')); sessionStorage.removeItem('"+a+"');"}),$(t.target).data("key",o)}else{var a=$(t.target).prev("td").text();e.sendCommandToClient("order",{order:"sessionStorage.setItem('"+a+"', '"+o+"')"})}}),$(".table-resources-cookies").on("change",function(t,o){if($(t.target).hasClass("keyClass")){var a=$(t.target).data("key"),n=$(t.target).next("td").text();e.sendCommandToClient("order",{order:"document.cookie='"+a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';"}),e.sendCommandToClient("order",{order:"document.cookie='"+o+"="+n+"';"}),$(t.target).data("key",o)}else{var a=$(t.target).prev("td").text();e.sendCommandToClient("order",{order:"document.cookie='"+a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';"}),e.sendCommandToClient("order",{order:"document.cookie='"+a+"="+o+"';"})}})},o.prototype.buttonEvent=function(){var e=this;$(".refresh").click(function(){e.sendCommandToClient("refresh")}),$(".add-value").click(function(){$(".new-entry").is(":visible")?$(".new-entry").fadeOut():($("#treeView2").animate({scrollTop:$("#treeView2").height()},1e3),$(".new-entry").fadeIn())})},o.prototype.toogleMenu=function(){$(".open-menu").click(function(){$(".open-menu").removeClass("active-menu"),$("#searchlist").val(""),$(".explorer-menu").hide(),$("#"+$(this).data("menu")).show(),$(".new-entry").fadeOut(),$(this).addClass("active-menu")})},o.prototype.processEntries=function(e){if(!this._containerLocalStorage)return console.warn("ResourcesExplorer dashboard receive client message but is not ready"),void 0;if(this._containerLocalStorage.innerHTML="",this._containerSessionStorage.innerHTML="",this._containerCookies.innerHTML="",e){if(e.localStorageList){for(var t=0;t<e.localStorageList.length;t++){var o=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td"),r=document.createElement("td");a.className+=" keyClass",a.dataset.key=e.localStorageList[t].key,n.className+=" valueClass",r.className+=" actionClass",a.innerHTML=e.localStorageList[t].key,n.innerHTML=e.localStorageList[t].value,r.innerHTML='<i class="fa fa-times"></i>',o.appendChild(r),o.appendChild(a),o.appendChild(n),this._containerLocalStorage.appendChild(o)}$(".table-resources-localStorage").editableTableWidget({editor:$("<textarea>")})}if(e.cookiesList){for(var t=0;t<e.cookiesList.length;t++){var o=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td"),r=document.createElement("td");a.className+=" keyClass",a.dataset.key=e.cookiesList[t].key,n.className+=" valueClass",r.className+=" actionClass",a.innerHTML=e.cookiesList[t].key,n.innerHTML=e.cookiesList[t].value,r.innerHTML='<i class="fa fa-times"></i>',o.appendChild(r),o.appendChild(a),o.appendChild(n),this._containerCookies.appendChild(o)}$(".table-resources-cookies").editableTableWidget({editor:$("<textarea>")})}if(e.sessionStorageList){for(var t=0;t<e.sessionStorageList.length;t++){var o=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td"),r=document.createElement("td");a.className+=" keyClass",a.dataset.key=e.sessionStorageList[t].key,n.className+=" valueClass",r.className+=" actionClass",a.innerHTML=e.sessionStorageList[t].key,n.innerHTML=e.sessionStorageList[t].value,r.innerHTML='<i class="fa fa-times"></i>',o.appendChild(r),o.appendChild(a),o.appendChild(n),this._containerSessionStorage.appendChild(o)}$(".table-resources-sessionStorage").editableTableWidget({editor:$("<textarea>")})}}},o}(e.DashboardPlugin);e.ResourcesExplorerDashboard=t,t.prototype.DashboardCommands={resourceitems:function(e){var t=this;t.processEntries(e)}},e.Core.RegisterDashboardPlugin(new t)}(VORLON||(VORLON={}));