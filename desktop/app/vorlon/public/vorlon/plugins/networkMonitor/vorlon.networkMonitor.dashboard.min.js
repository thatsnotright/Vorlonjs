var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},VORLON;!function(t){var e=function(e){function r(){e.call(this,"networkMonitor","control.html","control.css"),this._ready=!1,this._id="NETWORK"}return __extends(r,e),r.prototype.startDashboardSide=function(e){var r=this;void 0===e&&(e=null),this._insertHtmlContentAsync(e,function(){r._containerDiv=t.Tools.QuerySelectorById(e,"networkLogList"),r._ready=!0})},r.prototype.processEntries=function(t){if(!this._containerDiv)return console.error("NetworkMonitor dashboard receive client message but is not ready"),void 0;this._containerDiv.innerHTML="";var e={background:"rgb(211,211,211)",blocked:"rgb(204, 204, 204)",thirdParty:"rgb(0, 0, 0)",redirect:"rgb(255, 221, 0)",appCache:"rgb(161, 103, 38)",dns:"rgb(48, 150, 158)",tcp:"rgb(255, 157, 66)",ssl:"rgb(213,102, 223)",request:"rgb(64, 255, 64)",response:"rgb(52, 150, 255)"},r=0;if(t&&t.entries){for(var n=0;n<t.entries.length;n++)r=Math.max(r,t.entries[n].startTime+t.entries[n].duration);for(var i=r/100,a=0;a<t.entries.length;a++){var o=t.entries[a],s=document.createElement("tr"),d=document.createElement("td"),c=document.createElement("td"),p=document.createElement("td"),l=document.createElement("td"),u=document.createElement("td"),h=o.name.substring(o.name.lastIndexOf("/")+1);h.length>48&&(h=h.substring(0,48)+"..."),d.innerHTML=h,d.title=o.name,c.innerHTML=o.name.split("/")[2],p.innerHTML=o.type,l.innerHTML=Math.round(o.duration).toString(),l.className="network-log-list-right",u.style.width="400px",u.style.position="relative",u.appendChild(this.createBar(o.startTime/i,o.duration/i,e.background)),o.redirectDuration>0&&u.appendChild(this.createBar(o.redirectStart/i,o.redirectDuration/i,e.redirect)),o.dnsDuration>0&&u.appendChild(this.createBar(o.dnsStart/i,o.dnsDuration/i,e.dns)),o.tcpDuration>0&&u.appendChild(this.createBar(o.tcpStart/i,o.tcpDuration/i,e.tcp)),o.requestDuration>0&&u.appendChild(this.createBar(o.requestStart/i,o.requestDuration/i,e.request)),o.responseDuration>0&&u.appendChild(this.createBar(o.responseStart/i,o.responseDuration/i,e.response)),s.appendChild(d),s.appendChild(c),s.appendChild(p),s.appendChild(l),s.appendChild(u),this._containerDiv.appendChild(s)}}},r.prototype.createBar=function(t,e,r){var n=document.createElement("div");return n.className="chart-bar",n.style.marginLeft=t+"%",n.style.width=e+"%",n.style.backgroundColor=r,n},r}(t.DashboardPlugin);t.NetworkMonitorDashboard=e,e.prototype.DashboardCommands={performanceItems:function(t){var e=this;e.processEntries(t)}},t.Core.RegisterDashboardPlugin(new e)}(VORLON||(VORLON={}));