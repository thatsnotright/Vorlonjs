var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},VORLON;!function(t){var e=function(e){function o(){e.call(this,"objectExplorer"),this._objPrototype=Object.getPrototypeOf({}),this.STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,this.ARGUMENT_NAMES=/([^\s,]+)/g,this.rootProperty=t.Tools.IsWindowAvailable?"window":"global",this._id="OBJEXPLORER",this._ready=!0}return __extends(o,e),o.prototype.getFunctionArgumentNames=function(t){var e=[];try{var o=t.toString().replace(this.STRIP_COMMENTS,"");e=o.slice(o.indexOf("(")+1,o.indexOf(")")).match(this.ARGUMENT_NAMES),null===e&&(e=[])}catch(r){console.error(r)}return e},o.prototype.inspect=function(t,e,o){if(void 0===e)return null;var r={proto:null,fullpath:t.join("."),name:t[t.length-1],functions:[],properties:[],contentFetched:!0,type:typeof e};if(this.trace("inspecting "+r.fullpath+" as "+r.type),"function"===r.type)return r;if(null===e)return r.type="null",r.value=null,r;if("object"!==r.type)return r.value=e.toString(),r;var n=Object.getOwnPropertyNames(e),i=Object.getPrototypeOf(e);i&&i!=this._objPrototype&&(r.proto=this.inspect(t,i,o));for(var p=0,a=n.length;a>p;p++){var s=n[p],u="";if("__vorlon"!==s){var l=JSON.parse(JSON.stringify(t));l.push(s);try{var h=o[s];if(u=typeof h,"function"===u)r.functions.push({name:s,fullpath:l.join("."),args:this.getFunctionArgumentNames(h)});else if("undefined"===u)r.properties.push({name:s,type:u,fullpath:l.join("."),value:void 0});else if("null"===u)r.properties.push({name:s,type:u,fullpath:l.join("."),value:null});else if("object"===u){var c={name:s,type:u,fullpath:l.join("."),contentFetched:!1};null===h&&(c.type="null",c.contentFetched=!0),r.properties.push(c)}else r.properties.push({name:s,fullpath:l.join("."),type:u,value:h.toString()})}catch(f){this.trace("error reading property "+s+" of type "+u),this.trace(f),r.properties.push({name:s,type:u,fullpath:l.join("."),val:"oups, Vorlon has an error reading this "+u+" property..."})}}}return r.functions=r.functions.sort(function(t,e){var o=t.name.toLowerCase(),r=e.name.toLowerCase();return o>r?1:r>o?-1:0}),r.properties=r.properties.sort(function(t,e){var o=t.name.toLowerCase(),r=e.name.toLowerCase();return o>r?1:r>o?-1:0}),r},o.prototype._getProperty=function(e){var o=t.Tools.IsWindowAvailable?window:global,r=[this.rootProperty];if(this.trace("getting obj at "+e),e&&e!==this.rootProperty&&(r=e.split("."),r&&r.length))for(var n=0,i=r.length;i>n;n++)if(o=o[r[n]],void 0===o){this.trace(r[n]+" not found");break}if(void 0===o)return console.log("not found"),{type:"notfound",name:"not found",val:null,functions:[],properties:[],contentFetched:!1,fullpath:null};var p=this.inspect(r,o,o);return p},o.prototype._packageAndSendObjectProperty=function(t){t=t||this._currentPropertyPath;var e=this._getProperty(t);this.sendCommandToDashboard("update",e)},o.prototype.startClientSide=function(){},o.prototype.onRealtimeMessageReceivedFromDashboardSide=function(){},o.prototype.query=function(t){this._currentPropertyPath=t;var e=this._getProperty(t);this.sendCommandToDashboard("root",e)},o.prototype.queryContent=function(t){var e=this._getProperty(t);this.sendCommandToDashboard("content",e)},o.prototype.refresh=function(){this.query(this._currentPropertyPath)},o}(t.ClientPlugin);t.ObjectExplorerClient=e,e.prototype.ClientCommands={query:function(t){var e=this;e.query(t.path)},queryContent:function(t){var e=this;e.queryContent(t.path)}},t.Core.RegisterClientPlugin(new e)}(VORLON||(VORLON={}));