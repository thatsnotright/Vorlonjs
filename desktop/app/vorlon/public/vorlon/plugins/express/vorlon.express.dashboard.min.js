var __extends=this&&this.__extends||function(e,s){function t(){this.constructor=e}for(var r in s)s.hasOwnProperty(r)&&(e[r]=s[r]);e.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)},VORLON;!function(e){var s=function(e){function s(){e.call(this,"express","control.html","control.css"),this._ready=!0,console.log("Started")}return __extends(s,e),s.prototype.getID=function(){return"EXPRESS"},s.prototype.startDashboardSide=function(e){var s=this;void 0===e&&(e=null),this.sendToClient("express"),this._requests=[],this._insertHtmlContentAsync(e,function(){s.toogleMenu()})},s.prototype.setRoutes=function(){console.log("6",this._express),this._express._router.stack.filter(function(e){return e.route}).map(function(e){var s="<p> "+e.route.path+" - [";for(var t in e.route.methods)s+=t+" ";s+="] </p>",$("#express-routes").append(s)})},s.prototype.toogleMenu=function(){var e=this;$(".plugin-express .open-menu").click(function(){$(".plugin-express .open-menu").removeClass("active-menu"),$(".plugin-express #searchlist").val(""),$(".plugin-express .explorer-menu").hide(),$(".plugin-express #"+$(this).data("menu")).show(),$(".plugin-express .new-entry").fadeOut(),$(this).addClass("active-menu")}),$("#requestClear").click(function(){$("#express-request .routes-list").empty()}),$("#express-request .routes-list").on("click","li",function(){var s=e._requests[$(this).data("requestid")].headers,t=JSON.stringify(s,void 0,4);$(".header-req-din").html(e.syntaxHighlight(t)),$("#headers-req").css("height","100%"),$("#headers-req div").css("padding","15px")}),$("#headers-req .fa-times").click(function(){$("#headers-req").css("height","0%"),$("#headers-req div").css("padding","0px")})},s.prototype.syntaxHighlight=function(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var s="number";return/^"/.test(e)?s=/:$/.test(e)?"key":"string":/true|false/.test(e)?s="boolean":/null/.test(e)&&(s="null"),'<span class="'+s+'">'+e+"</span>"})},s.prototype.onRealtimeMessageReceivedFromClientSide=function(e){if("express"==e.type)e.data&&($("#no_vorlon").fadeOut(),this.sendToClient("express_route"),this.sendToClient("express_request"),this.sendToClient("express_locals"));else if("express_route"==e.type){for(var s=e.data,t=0,r=s.length;r>t;t++){var n=s[t].methods,o="checkout"==Object.keys(n)[0]?"any":Object.keys(n)[0];$("#express-routes .routes-list").append('<li><span class="method method-'+o+'">'+o+"</span>"+s[t].path+"</li>")}$("#routeFilter").on("keyup",function(){var e=$(this).val(),s=$("#express-routes .routes-list").children("li");e.length>0&&"any"!=e?(s.stop().hide(),$("#express-routes .routes-list").find("li:contains('"+e+"')").stop().show()):s.stop().show()}),$("#methodFilter").on("change",function(){var e=$(this).val(),s=$("#express-routes .routes-list").children("li");e.length>0&&"any"!=e?(s.stop().hide(),$("#express-routes .routes-list").find("li:contains('"+e+"')").stop().show()):s.stop().show()})}else if("express_request"==e.type){var a=new Date,i=a.getHours(),l=a.getMinutes(),p=a.getSeconds(),u=""+(i>12?i-12:i);u+=(10>l?":0":":")+l,u+=(10>p?":0":":")+p,u+=i>=12?" P.M.":" A.M.",$("#express-request .routes-list").prepend('<li data-requestid="'+this._requests.length+'"><span class="method method-'+e.data.method.toLowerCase()+'">'+e.data.method+'</span><span class="code-res code-'+e.data.code+'">'+e.data.code+"</span> "+e.data.url+' <span class="hour_request">'+u+'</span><span class="headers_request"><a href="#">+ headers</a></span></li>'),this._requests.push(e.data)}else"express_locals"==e.type&&$("#express-locals pre").html(this.syntaxHighlight(e.data))},s}(e.DashboardPlugin);e.ExpressDashboard=s,e.Core.RegisterDashboardPlugin(new s)}(VORLON||(VORLON={}));