var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},VORLON;!function(e){var t=function(t){function r(){t.call(this,"express"),this.hooked=!1,this._ready=!0,console.log("Started")}return __extends(r,t),r.prototype.getID=function(){return"EXPRESS"},r.prototype.refresh=function(){},r.prototype.startClientSide=function(){},r.prototype.onRealtimeMessageReceivedFromDashboardSide=function(t){if(!e.Tools.IsWindowAvailable)if("express"==t)"undefined"==typeof global.EXPRESS_VORLONJS?this.sendToDashboard({type:"express",data:!1}):this.sendToDashboard({type:"express",data:!0});else if("express_route"==t){var r=[];global.EXPRESS_VORLONJS._router.stack.filter(function(e){return e.route}).map(function(e){return r.push(e.route)}),this.sendToDashboard({type:"express_route",data:r})}else if("express_request"==t){for(var o=this,s=!1,n=global.EXPRESS_VORLONJS._router.stack,a=0,i=n.length;i>a;a++)"request_interceptor"==n[a].name&&(s=!0);s||global.EXPRESS_VORLONJS.use("request_interceptor",function(e,t,r){e.on("end",function(){o.sendToDashboard({type:"express_request",data:{code:t.statusCode,method:e.method,url:e.url,headers:e.headers}})}),r()});for(var n=global.EXPRESS_VORLONJS._router.stack,a=0,i=n.length;i>a;a++)if(-1!=n[a].regexp.toString().indexOf("request_interceptor")){var l=n[a],u=/^\/?(?=\/|$)/i;global.EXPRESS_VORLONJS._router.stack[a].regexp=u,global.EXPRESS_VORLONJS._router.stack[a].name="request_interceptor",global.EXPRESS_VORLONJS._router.stack.splice(a,1),global.EXPRESS_VORLONJS._router.stack.splice(2,0,l)}}else"express_locals"==t&&this.sendToDashboard({type:"express_locals",data:JSON.stringify(global.EXPRESS_VORLONJS.locals,void 0,4)})},r}(e.ClientPlugin);e.ExpressClient=t,e.Core.RegisterClientPlugin(new t)}(VORLON||(VORLON={}));